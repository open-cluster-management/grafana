{"version":3,"file":"SignupInvited.5587258e08db48f7225f.js","mappings":"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","sources":["webpack://grafana/./public/app/features/admin/utils.ts","webpack://grafana/./public/app/features/invites/SignupInvited.tsx"],"sourcesContent":["import { config } from '@grafana/runtime/src';\n\n// https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address\nexport const w3cStandardEmailValidator =\n  /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\nexport function isTrial() {\n  const expiry = config.licenseInfo?.trialExpiry;\n  return !!(expiry && expiry > 0);\n}\n\nexport const highlightTrial = () => isTrial() && config.featureToggles.featureHighlights;\n","import { css, cx } from '@emotion/css';\nimport { useState } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Button, Field, Input, useStyles2 } from '@grafana/ui';\nimport { Form } from 'app/core/components/Form/Form';\nimport { Page } from 'app/core/components/Page/Page';\nimport { getConfig } from 'app/core/config';\nimport { contextSrv } from 'app/core/core';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\n\nimport { w3cStandardEmailValidator } from '../admin/utils';\n\ninterface FormModel {\n  email: string;\n  name?: string;\n  username: string;\n  password?: string;\n}\n\nconst navModel = {\n  main: {\n    icon: 'grafana' as const,\n    text: 'Invite',\n    subTitle: 'Register your Grafana account',\n    breadcrumbs: [{ title: 'Login', url: 'login' }],\n  },\n  node: {\n    text: '',\n  },\n};\n\nexport interface Props extends GrafanaRouteComponentProps<{ code: string }> {}\n\nexport const SignupInvitedPage = ({ match }: Props) => {\n  const code = match.params.code;\n  const [initFormModel, setInitFormModel] = useState<FormModel>();\n  const [greeting, setGreeting] = useState<string>();\n  const [invitedBy, setInvitedBy] = useState<string>();\n  const styles = useStyles2(getStyles);\n\n  useAsync(async () => {\n    const invite = await getBackendSrv().get(`/api/user/invite/${code}`);\n\n    setInitFormModel({\n      email: invite.email,\n      name: invite.name,\n      username: invite.email,\n    });\n\n    setGreeting(invite.name || invite.email || invite.username);\n    setInvitedBy(invite.invitedBy);\n  }, [code]);\n\n  const onSubmit = async (formData: FormModel) => {\n    await getBackendSrv().post('/api/user/invite/complete', { ...formData, inviteCode: code });\n    window.location.href = getConfig().appSubUrl + '/';\n  };\n\n  if (!initFormModel) {\n    return null;\n  }\n\n  return (\n    <Page navModel={navModel}>\n      <Page.Contents>\n        <h3 className=\"page-sub-heading\">Hello {greeting || 'there'}.</h3>\n\n        <div className={cx('modal-tagline', styles.tagline)}>\n          <em>{invitedBy || 'Someone'}</em> has invited you to join Grafana and the organization{' '}\n          <span className=\"highlight-word\">{contextSrv.user.orgName}</span>\n          <br />\n          Please complete the following and choose a password to accept your invitation and continue:\n        </div>\n        <Form defaultValues={initFormModel} onSubmit={onSubmit}>\n          {({ register, errors }) => (\n            <>\n              <Field invalid={!!errors.email} error={errors.email && errors.email.message} label=\"Email\">\n                <Input\n                  placeholder=\"email@example.com\"\n                  {...register('email', {\n                    required: 'Email is required',\n                    pattern: {\n                      value: w3cStandardEmailValidator,\n                      message: 'Email is invalid',\n                    },\n                  })}\n                />\n              </Field>\n              <Field invalid={!!errors.name} error={errors.name && errors.name.message} label=\"Name\">\n                <Input placeholder=\"Name (optional)\" {...register('name')} />\n              </Field>\n              <Field invalid={!!errors.username} error={errors.username && errors.username.message} label=\"Username\">\n                <Input {...register('username', { required: 'Username is required' })} placeholder=\"Username\" />\n              </Field>\n              <Field invalid={!!errors.password} error={errors.password && errors.password.message} label=\"Password\">\n                <Input\n                  {...register('password', { required: 'Password is required' })}\n                  type=\"password\"\n                  placeholder=\"Password\"\n                />\n              </Field>\n\n              <Button type=\"submit\">Sign up</Button>\n            </>\n          )}\n        </Form>\n      </Page.Contents>\n    </Page>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tagline: css({\n    paddingBottom: theme.spacing(3),\n  }),\n});\n\nexport default SignupInvitedPage;\n"],"names":["w3cStandardEmailValidator","isTrial","expiry","highlightTrial","navModel","SignupInvitedPage","match","code","initFormModel","setInitFormModel","greeting","setGreeting","invitedBy","setInvitedBy","styles","getStyles","invite","onSubmit","formData","register","errors","theme"],"sourceRoot":""}