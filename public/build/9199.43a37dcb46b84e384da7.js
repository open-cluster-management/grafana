"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9199],{99199:(B,d,n)=>{n.r(d),n.d(d,{default:()=>G});var t=n(74848),f=n(42418),h=n(51488),x=n(70383),g=n(49785),j=n(67061),l=n(55852),C=n(40715),y=n(31678),A=n(61410),S=n(23770),F=n(21607),N=n(57220),c=n(56361),p=n(72399),O=n(88467),L=n(23807);const m={smtp_require_tls:!0},V=({config:s,alertManagerSourceName:r})=>{const i=(0,y.useDispatch)();(0,C.o)(a=>a.unifiedAlerting.saveAMConfig=O.jA);const{loading:e,error:o}=(0,A.$)(a=>a.saveAMConfig),v=(0,N.AL)(r),u=(0,g.mN)({defaultValues:JSON.parse(JSON.stringify({...m,...s.alertmanager_config.global??{}}))}),{handleSubmit:M,formState:{errors:P}}=u,$=a=>{i((0,S.RW)({newConfig:{...s,alertmanager_config:{...s.alertmanager_config,global:(0,p.FN)(a)}},oldConfig:s,alertManagerSourceName:r,successMessage:"Global config updated.",redirectPath:(0,c.nL)("/alerting/notifications",r)}))};return(0,t.jsx)(g.Op,{...u,children:(0,t.jsxs)("form",{onSubmit:M($),children:[o&&(0,t.jsx)(f.F,{severity:"error",title:"Error saving receiver",children:o.message||String(o)}),F.U.map(a=>(0,t.jsx)(L.e,{readOnly:v,defaultValue:m[a.propertyName],option:a,error:P[a.propertyName],pathPrefix:""},a.propertyName)),(0,t.jsx)("div",{children:(0,t.jsxs)(j.B,{children:[!v&&(0,t.jsxs)(t.Fragment,{children:[e&&(0,t.jsx)(l.$n,{disabled:!0,icon:"spinner",variant:"primary",children:"Saving..."}),!e&&(0,t.jsx)(l.$n,{type:"submit",children:"Save global config"})]}),(0,t.jsx)(l.z9,{disabled:e,fill:"outline",variant:"secondary",href:(0,c.nL)("alerting/notifications",r),children:"Cancel"})]})})]})})},G=()=>{const{selectedAlertmanager:s}=(0,x.VI)(),{data:r,isLoading:i,error:e}=(0,h.f)(s);return i&&!r?"loading...":e?(0,t.jsx)(f.F,{severity:"error",title:"Failed to fetch notification template",children:String(e)}):r?(0,t.jsx)(V,{config:r,alertManagerSourceName:s}):null}}}]);

//# sourceMappingURL=9199.43a37dcb46b84e384da7.js.map