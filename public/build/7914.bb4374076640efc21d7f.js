"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7914],{27914:(P,d,e)=>{e.r(d),e.d(d,{SignupPage:()=>g,default:()=>M});var a=e(74848),t=e(49785),_=e(17172),i=e(88575),n=e(10354),f=e(67061),m=e(55852),l=e(2913),h=e(3169),O=e(35538),c=e(20851),E=e(78361);const g=({queryParams:p})=>{const A=(0,h._2)(),{handleSubmit:D,formState:{errors:r},register:o,getValues:j}=(0,t.mN)({defaultValues:{email:p.email,code:p.code}}),v=async s=>{s.name===""&&delete s.name,delete s.confirm,(await(0,_.AI)().post("/api/user/signup/step2",{email:s.email,code:s.code,username:s.email,orgName:s.orgName,password:s.password,name:s.name}).catch(u=>{const x=u.data?.message||u;A.warning(x)})).code==="redirect-to-select-org"&&window.location.assign((0,l.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,l.zj)().appSubUrl+"/")};return(0,a.jsx)(c.GU,{children:(0,a.jsx)(c.qm,{children:(0,a.jsxs)("form",{onSubmit:D(v),style:{width:"100%"},children:[(0,a.jsx)(i.D,{label:"Your name",children:(0,a.jsx)(n.p,{id:"user-name",...o("name"),placeholder:"(optional)"})}),(0,a.jsx)(i.D,{label:"Email",invalid:!!r.email,error:r.email?.message,children:(0,a.jsx)(n.p,{id:"email",...o("email",{required:"Email is required",pattern:{value:O.pL,message:"Email is invalid"}}),type:"email",placeholder:"Email"})}),!(0,l.zj)().autoAssignOrg&&(0,a.jsx)(i.D,{label:"Org. name",children:(0,a.jsx)(n.p,{id:"org-name",...o("orgName"),placeholder:"Org. name"})}),(0,l.zj)().verifyEmailEnabled&&(0,a.jsx)(i.D,{label:"Email verification code (sent to your email)",children:(0,a.jsx)(n.p,{id:"verification-code",...o("code"),placeholder:"Code"})}),(0,a.jsx)(i.D,{label:"Password",invalid:!!r.password,error:r?.password?.message,children:(0,a.jsx)(E.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...o("password",{required:"Password is required"})})}),(0,a.jsx)(i.D,{label:"Confirm password",invalid:!!r.confirm,error:r?.confirm?.message,children:(0,a.jsx)(E.s,{id:"confirm-new-password",autoComplete:"new-password",...o("confirm",{required:"Confirmed password is required",validate:s=>s===j().password||"Passwords must match!"})})}),(0,a.jsxs)(f.B,{children:[(0,a.jsx)(m.$n,{type:"submit",children:"Submit"}),(0,a.jsx)(m.z9,{fill:"text",href:(0,l.zj)().appSubUrl+"/login",children:"Back to login"})]})]})})})},M=g},35538:(P,d,e)=>{e.d(d,{pL:()=>t,z5:()=>i});var a=e(32264);const t=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function _(){const n=a.$.licenseInfo?.trialExpiry;return!!(n&&n>0)}const i=()=>_()&&a.$.featureToggles.featureHighlights}}]);

//# sourceMappingURL=7914.bb4374076640efc21d7f.js.map