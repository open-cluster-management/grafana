"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7849,4492],{24880:(j,P,t)=>{t.r(P),t.d(P,{SoloPanelPage:()=>s,SoloPanelRenderer:()=>v,default:()=>l});var a=t(74848),m=t(32196),u=t(96540),g=t(40845),D=t(42418),p=t(62930),S=t(39419),x=t(7392),y=t(31678),M=t(72255),c=t(80943),O=t(41507),I=t(79284),h=t(30195),f=t(74730);function A(e,n){const[o,i]=(0,u.useState)(),[R,U]=(0,u.useState)();return(0,u.useEffect)(()=>{(0,c.Is)().initSync(e);const B=e.activate();let E=null;try{E=(0,f.vL)(e,n)}catch{}return E?(C(E),i(E)):(0,f.SN)(n)?d(e,n).then(T=>{T?i(T):U("Panel not found")}):U("Panel not found"),B},[e,n]),[o,R]}function C(e){let n=e.parent;for(;n&&!n.isActive;)n.activate(),n=n.parent}function d(e,n){return new Promise(o=>{e.subscribeToEvent(h.d,()=>{const i=(0,f.vL)(e,n);i?o(i):r(e.state.body)}),r(e.state.body)})}function r(e){e.forEachChild(n=>{if(n instanceof O.U&&!n.isActive){n.activate();return}if(n instanceof c.tI&&n.state.$behaviors){for(const o of n.state.$behaviors)if(o instanceof I.L&&!n.isActive){n.activate();break}r(n)}})}function s({match:e,queryParams:n}){const o=(0,M.sP)(),{dashboard:i}=o.useState();return(0,u.useEffect)(()=>(o.loadDashboard({uid:e.params.uid,route:y.DashboardRoutes.Embedded}),()=>o.clearState()),[o,e,n]),n.panelId?i?(0,a.jsx)(v,{dashboard:i,panelId:n.panelId}):(0,a.jsx)(S.A,{}):(0,a.jsx)(x.L,{entity:"Panel"})}const l=s;function v({dashboard:e,panelId:n}){const[o,i]=A(e,n),R=(0,g.of)(L);return i?(0,a.jsx)(D.F,{title:i}):o?(0,a.jsx)("div",{className:R.container,children:(0,a.jsx)(o.Component,{model:o})}):(0,a.jsxs)("span",{children:["Loading ",(0,a.jsx)(p.y,{})]})}const L=e=>({container:(0,m.css)({position:"fixed",bottom:0,right:0,margin:0,left:0,top:0,width:"100%",height:"100%"})})},55087:(j,P,t)=>{t.r(P),t.d(P,{SoloPanel:()=>f,SoloPanelPage:()=>h,default:()=>A});var a=t(74848),m=t(32196),u=t(96540),g=t(71468),D=t(70713),p=t(40845),S=t(42418),x=t(76888),y=t(39569),M=t(20470);const c=d=>({dashboard:d.dashboard.getModel()}),O={initDashboard:M.vR},I=(0,g.connect)(c,O);class h extends u.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}static{this.contextType=x.YE}componentDidMount(){const{match:r,route:s}=this.props;this.props.initDashboard({urlSlug:r.params.slug,urlUid:r.params.uid,urlType:r.params.type,routeName:s.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(r){const{dashboard:s}=this.props;if(s&&(!r.dashboard||r.dashboard.uid!==s.uid)){const l=s.getPanelByUrlId(this.props.queryParams.panelId);if(!l){this.setState({notFound:!0});return}l&&s.exitViewPanel(l),this.setState({panel:l}),s.initViewPanel(l)}}render(){return(0,a.jsx)(f,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}const f=({dashboard:d,notFound:r,panel:s,panelId:l,timezone:v})=>{const L=(0,p.of)(C);return r?(0,a.jsx)(S.F,{severity:"error",title:`Panel with id ${l} not found`}):!s||!d?(0,a.jsx)("div",{children:"Loading & initializing dashboard"}):(0,a.jsx)("div",{className:L.container,children:(0,a.jsx)(D.Ay,{children:({width:e,height:n})=>e===0?null:(0,a.jsx)(y.L,{stateKey:s.key,width:e,height:n,dashboard:d,panel:s,isEditing:!1,isViewing:!0,lazy:!1,timezone:v,hideMenu:!0})})})},A=I(h),C=d=>({container:(0,m.css)({position:"fixed",bottom:0,right:0,margin:0,left:0,top:0,width:"100%",height:"100%"})})}}]);

//# sourceMappingURL=SoloPanelPage.69e7de505f7fa84f4afb.js.map