"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4519],{50691:(Q,S,t)=>{t.d(S,{fk:()=>b,yf:()=>L,Df:()=>l,Uj:()=>I,Jn:()=>C,z$:()=>E});var e=t(74848),a=t(43429),f=t(39938);function l({error:r}){const u=v(r);return(0,e.jsx)(f.E,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:u})}function v(r){switch(r){case a.ZK.modifiedSignature:return"Plugin disabled due to modified content";case a.ZK.invalidSignature:return"Plugin disabled due to invalid plugin signature";case a.ZK.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${r?`: ${r}`:""}`}}var d=t(40845),P=t(32196);const D=r=>(0,P.css)`
  background: ${r.colors.background.primary};
  border-color: ${r.colors.border.strong};
  color: ${r.colors.text.secondary};
`;function C(){const r=(0,d.of)(D);return(0,e.jsx)(f.E,{text:"Installed",color:"orange",className:r})}var B=t(33378),z=t(67061),F=t(98624);function I({plugin:r}){const u=(0,d.of)(D);return(0,B.a)("enterprise.plugins")?(0,e.jsx)(f.E,{text:"Enterprise",color:"blue"}):(0,e.jsxs)(z.B,{wrap:"wrap",children:[(0,e.jsx)(F.B,{status:r.signature}),(0,e.jsx)(f.E,{icon:"lock",role:"img","aria-label":"lock icon",text:"Enterprise",color:"blue",className:u,title:"Requires a Grafana Enterprise license"})]})}function E({plugin:r}){const u=(0,d.of)(U);return(0,e.jsx)("p",{className:u.hasUpdate,children:"Update available!"})}const U=r=>({hasUpdate:(0,P.css)`
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function b(){return(0,e.jsx)(f.E,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function L(){return(0,e.jsx)(f.E,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},31036:(Q,S,t)=>{t.d(S,{E:()=>d});var e=t(74848),a=t(14110),f=t(68402),l=t(72109),v=t(8484);const d=()=>(0,e.jsxs)("div",{children:[(0,e.jsx)(f.$,{v:2}),(0,e.jsx)(l.Y,{href:"https://github.com/grafana/grafana/issues/new?assignees=&labels=area%2Fdatasource%2Ctype%2Fnew-plugin-request&projects=&template=3-data_source_request.yaml&title=%5BNew+Data+Source%5D%3A+%3Cname-of-service%3E",onClick:()=>(0,a.rR)("connections_data_source_request_clicked"),external:!0,children:(0,e.jsx)(v.x6,{i18nKey:"connections.connect-data.request-data-source",children:"Request a new data source"})}),(0,e.jsx)("br",{}),(0,e.jsx)(l.Y,{href:"https://github.com/orgs/grafana/projects/619/views/1?pane=info",onClick:()=>(0,a.rR)("connections_data_source_roadmap_clicked"),external:!0,children:(0,e.jsx)(v.x6,{i18nKey:"connections.connect-data.roadmap",children:"View roadmap"})})]})},65965:(Q,S,t)=>{t.r(S),t.d(S,{default:()=>de});var e=t(74848),a=t(32196),f=t(24180),l=t(39601),v=t(40845),d=t(88575),P=t(90182),D=t(94354),C=t(56034),B=t(69444),z=t(17422),F=t(6320),I=t(31678),E=t(42930),U=t(32264),b=t(69529),L=t(71259),r=t(8484),u=t(66253),N=t(70255),X=t(14110),V=t(14578),K=t(67061),Z=t(39938),w=t(72129),k=t(43429),q=t(98624),m=t(50691);function _({plugin:n}){const p=n.hasUpdate&&!n.isCore&&n.type!==k.QE.renderer;return n.isEnterprise?(0,e.jsxs)(K.B,{height:"auto",wrap:"wrap",children:[(0,e.jsx)(m.Uj,{plugin:n}),n.isDisabled&&(0,e.jsx)(m.Df,{error:n.error}),p&&!n.isManaged&&(0,e.jsx)(m.z$,{plugin:n}),n.angularDetected&&(0,e.jsx)(m.fk,{})]}):(0,e.jsxs)(K.B,{height:"auto",wrap:"wrap",children:[(0,e.jsx)(q.B,{status:n.signature}),n.isDisabled&&(0,e.jsx)(m.Df,{error:n.error}),n.isDeprecated&&(0,e.jsx)(m.yf,{}),n.isInstalled&&(0,e.jsx)(m.Jn,{}),p&&!n.isManaged&&(0,e.jsx)(m.z$,{plugin:n}),n.angularDetected&&(0,e.jsx)(m.fk,{})]})}function ee({alt:n,className:p,src:i,height:g}){return(0,e.jsx)("img",{src:i,className:p,alt:n,loading:"lazy",height:g})}const T="48px";function se({plugin:n,pathName:p,displayMode:i=u.fy.Grid}){const g=(0,v.of)(J),y=i===u.fy.List,W=()=>{l.Ny.getSearchObject()?.q&&(0,X.rR)("plugins_search_user_click",{})};return(0,e.jsxs)("a",{href:`${p}/${n.id}`,className:(0,a.cx)(g.container,{[g.list]:y}),onClick:W,children:[(0,e.jsx)(ee,{src:n.info.logos.small,className:g.pluginLogo,height:T,alt:""}),(0,e.jsx)("h2",{className:(0,a.cx)(g.name,"plugin-name"),children:n.name}),(0,e.jsxs)("div",{className:(0,a.cx)(g.content,"plugin-content"),children:[(0,e.jsxs)("p",{children:["By ",n.orgName]}),(0,e.jsx)(_,{plugin:n})]}),(0,e.jsx)("div",{className:g.pluginType,children:n.type&&(0,e.jsx)(V.I,{name:u.Ip[n.type],title:`${n.type} plugin`})})]})}const te=({displayMode:n=u.fy.Grid,rootProps:p})=>{const i=(0,v.of)(J),g=n===u.fy.List;return(0,e.jsxs)("div",{className:(0,a.cx)(i.container,{[i.list]:g}),...p,children:[(0,e.jsx)(N.A,{containerClassName:(0,a.cx)(i.pluginLogo,(0,a.css)({lineHeight:1})),width:T,height:T}),(0,e.jsx)("h2",{className:i.name,children:(0,e.jsx)(N.A,{width:100})}),(0,e.jsxs)("div",{className:i.content,children:[(0,e.jsx)("p",{children:(0,e.jsx)(N.A,{width:120})}),(0,e.jsxs)(K.B,{direction:"row",children:[(0,e.jsx)(Z.E.Skeleton,{}),(0,e.jsx)(Z.E.Skeleton,{})]})]}),(0,e.jsx)("div",{className:i.pluginType,children:(0,e.jsx)(N.A,{width:16,height:16})})]})},M=(0,w.j)(se,te),J=n=>({container:(0,a.css)({display:"grid",gridTemplateColumns:`${T} 1fr ${n.spacing(3)}`,gridTemplateRows:"auto",gap:n.spacing(2),gridAutoFlow:"row",background:n.colors.background.secondary,borderRadius:n.shape.radius.default,padding:n.spacing(3),[n.transitions.handleMotion("no-preference","reduce")]:{transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short})},"&:hover":{background:n.colors.emphasize(n.colors.background.secondary,.03)}}),list:(0,a.css)({rowGap:0,"> img":{alignSelf:"start"},"> .plugin-content":{minHeight:0,gridArea:"2 / 2 / 4 / 3","> p":{margin:n.spacing(0,0,.5,0)}},"> .plugin-name":{alignSelf:"center",gridArea:"1 / 2 / 2 / 3"}}),pluginType:(0,a.css)({gridArea:"1 / 3 / 2 / 4",color:n.colors.text.secondary}),pluginLogo:(0,a.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,a.css)({gridArea:"3 / 1 / 4 / 3",color:n.colors.text.secondary}),name:(0,a.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:n.typography.h4.fontSize,color:n.colors.text.primary,margin:0,wordBreak:"normal",overflowWrap:"anywhere"})}),ne=({plugins:n,displayMode:p,isLoading:i})=>{const g=p===u.fy.List,{pathname:y}=(0,f.zy)(),W=U.$.appSubUrl+(y.endsWith("/")?y.slice(0,-1):y);return!i&&n.length===0?(0,e.jsx)(b.p,{variant:"not-found",message:(0,r.t)("plugins.empty-state.message","No plugins found")}):(0,e.jsx)(L.x,{gap:3,...g?{columns:1}:{minColumnWidth:34},"data-testid":"plugin-list",children:i?new Array(50).fill(null).map((A,R)=>(0,e.jsx)(M.Skeleton,{displayMode:p},R)):n.map(A=>(0,e.jsx)(M,{plugin:A,pathName:W,displayMode:p},A.id))})};var ae=t(31036),H=t(96540),s=t(40996),o=t(67647);const c=(n,p=0,i=[])=>{const g=(0,H.useRef)(!0),y=[...i,g];return(0,s.A)(()=>{if(g.current){g.current=!1;return}return n()},p,y)},h=({value:n,onSearch:p})=>{const[i,g]=(0,H.useState)(n);return c(()=>p(i??""),500,[i]),(0,e.jsx)(o.Z,{value:i,onKeyDown:y=>{(y.key==="Enter"||y.keyCode===13)&&p(y.currentTarget.value)},placeholder:"Search Grafana plugins",onChange:y=>{g(y)},width:46})};var x=t(5129);const G=()=>({push:({query:n})=>{l.Ny.partial(n)}});var $=t(83391);function de({route:n}){const p=(0,f.zy)(),i=(0,l.SE)(p.search),g=(0,I.useSelector)(j=>(0,z.tc)(j.navIndex,"plugins")),{displayMode:y,setDisplayMode:W}=(0,$.Tr)(),A=(0,v.of)(ue),R=G(),ge=(0,$.pw)(),oe=i.q?.toString()||"",O=i.filterBy?.toString()||"all",Y=i.filterByType||"all",re=i.sortBy||x.by.nameAsc,{isLoading:pe,error:le,plugins:he}=(0,$.PW)({keyword:oe,type:Y!=="all"?Y:void 0,isInstalled:O==="installed"?!0:void 0,hasUpdate:O==="has-update"?!0:void 0},re),ie=[{value:"all",label:"All"},{value:"installed",label:"Installed"},{value:"has-update",label:"New Updates"}],ye=j=>{R.push({query:{sortBy:j.value}})},ce=j=>{R.push({query:{filterBy:j}})},fe=j=>{R.push({query:{filterByType:j.value}})},xe=j=>{R.push({query:{filterBy:O,filterByType:Y,q:j}})};if(le)return console.error(le.message),null;const ve=(0,e.jsxs)("div",{children:["Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",(0,e.jsx)("a",{className:"external-link",href:`${F.b.AddNewConnection}?cat=data-source`,children:"Connections"}),"."]});return(0,e.jsx)(B.Y,{navModel:g,subTitle:ve,children:(0,e.jsxs)(B.Y.Contents,{children:[(0,e.jsxs)(E.G,{wrap:!0,children:[(0,e.jsx)(d.D,{label:"Search",children:(0,e.jsx)(h,{value:oe,onSearch:xe})}),(0,e.jsxs)(E.G,{wrap:!0,className:A.actionBar,children:[(0,e.jsx)(d.D,{label:"Type",children:(0,e.jsx)(P.l6,{"aria-label":"Plugin type filter",value:Y,onChange:fe,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})}),ge?(0,e.jsx)(d.D,{label:"State",children:(0,e.jsx)(D.z,{value:O,onChange:ce,options:ie})}):(0,e.jsx)(C.m,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top",children:(0,e.jsx)("div",{children:(0,e.jsx)(d.D,{label:"State",children:(0,e.jsx)(D.z,{disabled:!0,value:O,onChange:ce,options:ie})})})}),(0,e.jsx)(d.D,{label:"Sort",children:(0,e.jsx)(P.l6,{"aria-label":"Sort Plugins List",width:24,value:re,onChange:ye,options:[{value:"nameAsc",label:"By name (A-Z)"},{value:"nameDesc",label:"By name (Z-A)"},{value:"updated",label:"By updated date"},{value:"published",label:"By published date"},{value:"downloads",label:"By downloads"}]})}),(0,e.jsx)(d.D,{label:"View",children:(0,e.jsx)(D.z,{className:A.displayAs,value:y,onChange:W,options:[{value:u.fy.Grid,icon:"table",description:"Display plugins in a grid layout"},{value:u.fy.List,icon:"list-ul",description:"Display plugins in list"}]})})]})]}),(0,e.jsx)("div",{className:A.listWrap,children:(0,e.jsx)(ne,{plugins:he,displayMode:y,isLoading:pe})}),(0,e.jsx)(ae.E,{})]})})}const ue=n=>({actionBar:(0,a.css)({[n.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,a.css)({marginTop:n.spacing(2)}),displayAs:(0,a.css)({svg:{marginRight:0}})})},83391:(Q,S,t)=>{t.d(S,{Tr:()=>H,A5:()=>ae,wr:()=>T,m5:()=>ee,PW:()=>X,F9:()=>Z,ob:()=>V,xX:()=>w,XN:()=>se,pw:()=>m,Gp:()=>q,qG:()=>te,SQ:()=>k});var e=t(96540),a=t(31678),f=t(5129),l=t(20701),v=t(31326),d=t(25508),P=t(54479),D=t(14110),C=t(66253);const B=s=>s.plugins,z=(0,d.Mz)(B,({items:s})=>s),F=(0,d.Mz)(B,({settings:s})=>s.displayMode),{selectAll:I,selectById:E}=v.AI.getSelectors(z),U=s=>(0,d.Mz)(I,o=>{const c=s.keyword?(0,P.xb)(s.keyword.toLowerCase()):"",h=c!==""?(0,f.TD)(o,c):null;return c&&(0,D.rR)("plugins_search",{resultsCount:h?.length}),o.filter(x=>!(c&&h==null||c&&!h?.includes(x.id)||s.type&&x.type!==s.type||s.isInstalled!==void 0&&x.isInstalled!==s.isInstalled||s.isEnterprise!==void 0&&x.isEnterprise!==s.isEnterprise||s.hasUpdate!==void 0&&x.hasUpdate!==s.hasUpdate))}),b=s=>(0,d.Mz)(I,o=>{const c=[];for(const h of o)h.error&&(!s||h.type===s)&&c.push({pluginId:h.id,errorCode:h.error,pluginType:h.type});return c}),L=s=>(0,d.Mz)(B,({requests:o={}})=>o[s]),r=s=>(0,d.Mz)(L(s),o=>o?.status===C.IZ.Pending),u=s=>(0,d.Mz)(L(s),o=>o?.status===C.IZ.Rejected?o?.error:null),N=s=>(0,d.Mz)(L(s),o=>o===void 0),X=(s,o=f.by.nameAsc)=>{M();const c=(0,e.useMemo)(()=>U(s),[s]),h=(0,a.useSelector)(c),{isLoading:x,error:G}=_(),$=(0,f.Xc)(h,o);return{isLoading:x,error:G,plugins:$}},V=s=>(M(),ne(s),(0,a.useSelector)(o=>E(o,s))),K=s=>(J(),useSelector(o=>selectById(o,s))),Z=s=>(M(),(0,a.useSelector)(b(s))),w=()=>{const s=(0,a.useDispatch)();return(o,c,h)=>s((0,l.ai)({id:o,version:c,isUpdating:h}))},k=()=>{const s=(0,a.useDispatch)();return()=>s((0,l.nT)())},q=()=>{const s=(0,a.useDispatch)();return o=>s((0,l.JC)(o))},m=()=>(0,a.useSelector)(u(l.JJ.typePrefix))===null,_=()=>{const s=(0,a.useSelector)(r("plugins/fetchLocal")),o=(0,a.useSelector)(u("plugins/fetchLocal"));return{isLoading:s,error:o}},ee=()=>{const s=(0,a.useSelector)(r(l.mj.typePrefix)),o=(0,a.useSelector)(r("plugins/fetchLocal")),c=(0,a.useSelector)(r("plugins/fetchRemote")),h=s||o||c,x=(0,a.useSelector)(u(l.mj.typePrefix));return{isLoading:h,error:x}},T=()=>{const s=(0,a.useSelector)(r(l.t5.typePrefix)),o=(0,a.useSelector)(u(l.t5.typePrefix));return{isLoading:s,error:o}},se=()=>{const s=(0,a.useSelector)(r(l.ai.typePrefix)),o=(0,a.useSelector)(u(l.ai.typePrefix));return{isInstalling:s,error:o}},te=()=>{const s=(0,a.useSelector)(r(l.JC.typePrefix)),o=(0,a.useSelector)(u(l.JC.typePrefix));return{isUninstalling:s,error:o}},M=()=>{const s=(0,a.useDispatch)(),o=(0,a.useSelector)(N(l.mj.typePrefix));(0,e.useEffect)(()=>{o&&s((0,l.mj)())},[])},J=()=>{const s=useDispatch(),o=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{o&&s(fetchAllLocal())},[])},ne=s=>{const o=(0,a.useDispatch)(),c=(0,a.useSelector)(G=>E(G,s)),x=!(0,a.useSelector)(r(l.t5.typePrefix))&&c&&!c.details;(0,e.useEffect)(()=>{x&&o((0,l.t5)(s))},[c])},ae=()=>{const s=(0,a.useDispatch)();return o=>s((0,l.t5)(o))},H=()=>{const s=(0,a.useDispatch)();return{displayMode:(0,a.useSelector)(F),setDisplayMode:c=>s((0,v.qo)(c))}}}}]);

//# sourceMappingURL=PluginListPage.8ebbdf9b5ec12c4a02bd.js.map