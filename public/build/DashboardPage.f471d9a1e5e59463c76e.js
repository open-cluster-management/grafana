"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2976,2859],{13251:(W,d,a)=>{a.d(d,{EmbeddedDashboard:()=>v});var t=a(74848),n=a(32196),r=a(96540),M=a(76885),o=a(80943),g=a(42418),c=a(62930),O=a(40845),l=a(31678),h=a(72255);function v(s){const e=(0,h.sP)(),{dashboard:E,loadError:i}=e.useState();return(0,r.useEffect)(()=>(e.loadDashboard({uid:s.uid,route:l.DashboardRoutes.Embedded}),()=>{e.clearState()}),[e,s.uid]),i?(0,t.jsx)(g.F,{severity:"error",title:"Failed to load dashboard",children:i}):E?(0,t.jsx)(_,{model:E,...s}):(0,t.jsx)(c.y,{})}function _({model:s,initialState:e,onStateChange:E}){const[i,T]=(0,r.useState)(!1),{controls:D,body:P,scopes:u}=s.useState(),f=(0,O.of)(p);return(0,r.useEffect)(()=>{if(T(!0),e){const C=new URLSearchParams(e);o.Go.syncStateFromSearchParams(s,C)}return s.activate()},[s]),m(E,s),i?(0,t.jsxs)("div",{className:(0,n.cx)(f.canvas,D&&!u&&f.canvasWithControls,u&&f.canvasWithScopes),children:[u&&(0,t.jsx)(u.Component,{model:u}),D&&(0,t.jsx)("div",{className:(0,n.cx)(f.controlsWrapper,u&&f.controlsWrapperWithScopes),children:(0,t.jsx)(D.Component,{model:D})}),(0,t.jsx)("div",{className:f.body,children:(0,t.jsx)(P.Component,{model:P})})]}):null}function m(s,e){(0,r.useEffect)(()=>{if(!s)return;let E="";const i=e.subscribeToEvent(o.bZ,T=>{if(T.payload.changedObject.urlSync){const D=o.Go.getUrlState(e),P=M.kM.renderUrl("",D);E!==P&&(E=P,s(P))}});return()=>i.unsubscribe()},[e,s])}function p(s){return{canvas:(0,n.css)({label:"canvas-content",display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",flexBasis:"100%",flexGrow:1}),canvasWithControls:(0,n.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),canvasWithScopes:(0,n.css)({gridTemplateAreas:`
        "scopes controls"
        "panels panels"`,gridTemplateColumns:`${s.spacing(32)} 1fr`,gridTemplateRows:"auto 1fr"}),body:(0,n.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",gridArea:"panels",marginBottom:s.spacing(2)}),controlsWrapper:(0,n.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls",padding:s.spacing(2,0,2,2)}),controlsWrapperWithScopes:(0,n.css)({padding:s.spacing(2,0)})}}},14962:(W,d,a)=>{a.r(d),a.d(d,{EmbeddedDashboardTestPage:()=>c,default:()=>O});var t=a(74848),n=a(96540),r=a(64388),M=a(90613),o=a(69444),g=a(13251);function c(){const[l,h]=(0,n.useState)("?from=now-5m&to=now");return(0,t.jsxs)(o.Y,{navId:"dashboards/browse",pageNav:{text:"Embedding dashboard",subTitle:"Showing dashboard: Panel Tests - Pie chart"},layout:r.k.Canvas,children:[(0,t.jsxs)(M.a,{paddingY:2,children:["Internal url state: ",l]}),(0,t.jsx)(g.EmbeddedDashboard,{uid:"lVE-2YFMz",initialState:l,onStateChange:h})]})}const O=c},30798:(W,d,a)=>{a.r(d),a.d(d,{default:()=>O});var t=a(74848),n=a(96540),r=a(19347),M=a(39601),o=a(69444),g=a(31678),c=a(28601);function O(l){const[h,v]=(0,n.useState)(null),{datasourceUid:_}=l.match.params,m=(0,g.useDispatch)();return(0,n.useEffect)(()=>{if(!(0,r.l)().getInstanceSettings(_)){v("Data source not found");return}m((0,c.Ub)(_)),M.Ny.replace("/dashboard/new")},[_,m]),h?(0,t.jsx)(o.Y,{navId:"dashboards",children:(0,t.jsx)(o.Y.Contents,{children:(0,t.jsxs)("div",{children:['Data source with UID "',_,'" not found.']})})}):null}}}]);

//# sourceMappingURL=DashboardPage.f471d9a1e5e59463c76e.js.map