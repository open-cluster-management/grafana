{"version":3,"file":"SoloPanelPageOld.ef1dd090e3a14b383f49.js","mappings":"uRAqBA,MAAMA,EAAmBC,IAAuB,CAC9C,UAAWA,EAAM,UAAU,SAAS,CACtC,GAEMC,EAAqB,CACzB,cAAa,IACf,EAEMC,KAAY,WAAQH,EAAiBE,CAAkB,EAUtD,MAAME,UAAsB,WAAwB,CAApD,kCAIL,WAAe,CACb,MAAO,KACP,SAAU,EACZ,EALA,MAAO,CAAP,KAAO,YAAc,KAOrB,mBAAoB,CAClB,KAAM,CAAE,MAAAC,EAAO,MAAAC,CAAM,EAAI,KAAK,MAE9B,KAAK,MAAM,cAAc,CACvB,QAASD,EAAM,OAAO,KACtB,OAAQA,EAAM,OAAO,IACrB,QAASA,EAAM,OAAO,KACtB,UAAWC,EAAM,UACjB,OAAQ,GACR,cAAe,KAAK,QAAQ,WAC9B,CAAC,CACH,CAEA,YAAqB,CACnB,OAAO,SAAS,KAAK,MAAM,YAAY,SAAW,IAAK,EAAE,CAC3D,CAEA,mBAAmBC,EAAkB,CACnC,KAAM,CAAE,UAAAC,CAAU,EAAI,KAAK,MAE3B,GAAKA,IAKD,CAACD,EAAU,WAAaA,EAAU,UAAU,MAAQC,EAAU,KAAK,CACrE,MAAMC,EAAQD,EAAU,gBAAgB,KAAK,MAAM,YAAY,OAAO,EAEtE,GAAI,CAACC,EAAO,CACV,KAAK,SAAS,CAAE,SAAU,EAAK,CAAC,EAChC,MACF,CAEIA,GACFD,EAAU,cAAcC,CAAK,EAG/B,KAAK,SAAS,CAAE,MAAAA,CAAM,CAAC,EACvBD,EAAU,cAAcC,CAAK,CAC/B,CACF,CAEA,QAAS,CACP,SACE,OAACC,EAAA,CACC,UAAW,KAAK,MAAM,UACtB,SAAU,KAAK,MAAM,SACrB,MAAO,KAAK,MAAM,MAClB,QAAS,KAAK,WAAW,EACzB,SAAU,KAAK,MAAM,YAAY,SACnC,CAEJ,CACF,CAQO,MAAMA,EAAY,CAAC,CAAE,UAAAF,EAAW,SAAAG,EAAU,MAAAF,EAAO,QAAAG,EAAS,SAAAC,CAAS,IAAsB,CAC9F,MAAMC,KAAS,MAAWC,CAAS,EACnC,OAAIJ,KACK,OAAC,IAAK,CAAC,SAAS,QAAQ,MAAO,iBAAiBC,CAAO,aAAc,EAG1E,CAACH,GAAS,CAACD,KACN,OAAC,OAAI,4CAAgC,KAI5C,OAAC,OAAI,UAAWM,EAAO,UACrB,mBAAC,KAAS,CACP,UAAC,CAAE,MAAAE,EAAO,OAAAC,CAAO,IACZD,IAAU,EACL,QAGP,OAAC,KACC,SAAUP,EAAM,IAChB,MAAAO,EACA,OAAAC,EACA,UAAAT,EACA,MAAAC,EACA,UAAW,GACX,UAAW,GACX,KAAM,GACN,SAAAI,EACA,SAAU,GACZ,CAEJ,CACF,EACF,CAEJ,EAEA,EAAeV,EAAUC,CAAa,EAEhCW,EAAaG,IAA0B,CAC3C,aAAW,OAAI,CACb,SAAU,QACV,OAAQ,EACR,MAAO,EACP,OAAQ,EACR,KAAM,EACN,IAAK,EACL,MAAO,OACP,OAAQ,MACV,CAAC,CACH,E","sources":["webpack://grafana/./public/app/features/dashboard/containers/SoloPanelPage.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { Component } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, useStyles2 } from '@grafana/ui';\nimport { GrafanaContext, GrafanaContextType } from 'app/core/context/GrafanaContext';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\nimport { DashboardModel, PanelModel } from 'app/features/dashboard/state';\nimport { StoreState } from 'app/types';\n\nimport { DashboardPanel } from '../dashgrid/DashboardPanel';\nimport { initDashboard } from '../state/initDashboard';\n\nexport interface DashboardPageRouteParams {\n  uid?: string;\n  type?: string;\n  slug?: string;\n}\n\nconst mapStateToProps = (state: StoreState) => ({\n  dashboard: state.dashboard.getModel(),\n});\n\nconst mapDispatchToProps = {\n  initDashboard,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport type Props = GrafanaRouteComponentProps<DashboardPageRouteParams, { panelId: string; timezone?: string }> &\n  ConnectedProps<typeof connector>;\n\nexport interface State {\n  panel: PanelModel | null;\n  notFound: boolean;\n}\n\nexport class SoloPanelPage extends Component<Props, State> {\n  declare context: GrafanaContextType;\n  static contextType = GrafanaContext;\n\n  state: State = {\n    panel: null,\n    notFound: false,\n  };\n\n  componentDidMount() {\n    const { match, route } = this.props;\n\n    this.props.initDashboard({\n      urlSlug: match.params.slug,\n      urlUid: match.params.uid,\n      urlType: match.params.type,\n      routeName: route.routeName,\n      fixUrl: false,\n      keybindingSrv: this.context.keybindings,\n    });\n  }\n\n  getPanelId(): number {\n    return parseInt(this.props.queryParams.panelId ?? '0', 10);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const { dashboard } = this.props;\n\n    if (!dashboard) {\n      return;\n    }\n\n    // we just got a new dashboard\n    if (!prevProps.dashboard || prevProps.dashboard.uid !== dashboard.uid) {\n      const panel = dashboard.getPanelByUrlId(this.props.queryParams.panelId);\n\n      if (!panel) {\n        this.setState({ notFound: true });\n        return;\n      }\n\n      if (panel) {\n        dashboard.exitViewPanel(panel);\n      }\n\n      this.setState({ panel });\n      dashboard.initViewPanel(panel);\n    }\n  }\n\n  render() {\n    return (\n      <SoloPanel\n        dashboard={this.props.dashboard}\n        notFound={this.state.notFound}\n        panel={this.state.panel}\n        panelId={this.getPanelId()}\n        timezone={this.props.queryParams.timezone}\n      />\n    );\n  }\n}\n\nexport interface SoloPanelProps extends State {\n  dashboard: DashboardModel | null;\n  panelId: number;\n  timezone?: string;\n}\n\nexport const SoloPanel = ({ dashboard, notFound, panel, panelId, timezone }: SoloPanelProps) => {\n  const styles = useStyles2(getStyles);\n  if (notFound) {\n    return <Alert severity=\"error\" title={`Panel with id ${panelId} not found`} />;\n  }\n\n  if (!panel || !dashboard) {\n    return <div>Loading & initializing dashboard</div>;\n  }\n\n  return (\n    <div className={styles.container}>\n      <AutoSizer>\n        {({ width, height }) => {\n          if (width === 0) {\n            return null;\n          }\n          return (\n            <DashboardPanel\n              stateKey={panel.key}\n              width={width}\n              height={height}\n              dashboard={dashboard}\n              panel={panel}\n              isEditing={false}\n              isViewing={true}\n              lazy={false}\n              timezone={timezone}\n              hideMenu={true}\n            />\n          );\n        }}\n      </AutoSizer>\n    </div>\n  );\n};\n\nexport default connector(SoloPanelPage);\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css({\n    position: 'fixed',\n    bottom: 0,\n    right: 0,\n    margin: 0,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n  }),\n});\n"],"names":["mapStateToProps","state","mapDispatchToProps","connector","SoloPanelPage","match","route","prevProps","dashboard","panel","SoloPanel","notFound","panelId","timezone","styles","getStyles","width","height","theme"],"sourceRoot":""}