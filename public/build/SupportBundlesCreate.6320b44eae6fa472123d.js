"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1515],{33809:(A,d,t)=>{t.r(d),t.d(d,{SupportBundlesCreateUnconnected:()=>M,default:()=>T});var e=t(74848),f=t(96540),u=t(71468),_=t(42418),s=t(88575),c=t(10880),O=t(67061),E=t(55852),P=t(72235),p=t(69444),i=t(58330);const n=(0,e.jsx)("span",{children:"Choose the components for the support bundle. The support bundle will be available for 3 days after creation."}),r=l=>({collectors:l.supportBundles.supportBundleCollectors,isLoading:l.supportBundles.createBundlePageLoading,loadCollectorsError:l.supportBundles.loadBundlesError,createBundleError:l.supportBundles.createBundleError}),B={loadSupportBundleCollectors:i.OS,createSupportBundle:i.iO},y=(0,u.connect)(r,B),M=({collectors:l,isLoading:g,loadCollectorsError:C,createBundleError:v,loadSupportBundleCollectors:h,createSupportBundle:I})=>{const L=o=>{const a=Object.keys(o).filter(D=>o[D]);I({collectors:a})};(0,f.useEffect)(()=>{h()},[h]);const U=l.reduce((o,a)=>({...o,[a.uid]:a.default}),{});return(0,e.jsx)(p.Y,{navId:"support-bundles",pageNav:{text:"Create support bundle"},subTitle:n,children:(0,e.jsxs)(p.Y.Contents,{isLoading:g,children:[C&&(0,e.jsx)(_.F,{title:C,severity:"error"}),v&&(0,e.jsx)(_.F,{title:v,severity:"error"}),!!l.length&&(0,e.jsx)(P.l,{defaultValues:U,onSubmit:L,validateOn:"onSubmit",children:({register:o})=>(0,e.jsxs)(e.Fragment,{children:[[...l].sort((a,D)=>a.displayName.localeCompare(D.displayName)).map(a=>(0,e.jsx)(s.D,{children:(0,e.jsx)(c.S,{...o(a.uid),label:a.displayName,id:a.uid,description:a.description,defaultChecked:a.default,disabled:a.includedByDefault})},a.uid)),(0,e.jsxs)(O.B,{children:[(0,e.jsx)(E.$n,{type:"submit",children:"Create"}),(0,e.jsx)(E.z9,{href:"/support-bundles",variant:"secondary",children:"Cancel"})]})]})})]})})},T=y(M)},58330:(A,d,t)=>{t.d(d,{Hb:()=>P,OS:()=>p,WJ:()=>c,ac:()=>E,iO:()=>i});var e=t(2543),f=t.n(e),u=t(17172),_=t(39601),s=t(8212);function c(n=!1){return async r=>{try{n||r((0,s.sF)());const B=await(0,u.AI)().get("/api/support-bundles");r((0,s.sJ)(B))}finally{r((0,s.kH)())}}}const O=(0,e.throttle)(async n=>{const r=await(0,u.AI)().get("/api/support-bundles");n((0,s.sJ)(r))},1e3);function E(){return async n=>{n(O)}}function P(n){return async r=>{await(0,u.AI)().delete(`/api/support-bundles/${n}`),r(c(!0))}}function p(){return async n=>{try{n((0,s.Y1)());const r=await(0,u.AI)().get("/api/support-bundles/collectors");n((0,s.j7)(r))}catch{n((0,s.pB)("Error loading support bundles data collectors"))}finally{n((0,s.s7)())}}}function i(n){return async r=>{try{await(0,u.AI)().post("/api/support-bundles",n),_.Ny.push("/support-bundles")}catch{r((0,s.NV)("Error creating support bundle"))}}}}}]);

//# sourceMappingURL=SupportBundlesCreate.6320b44eae6fa472123d.js.map