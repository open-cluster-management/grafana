"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[44],{64047:(oe,A,a)=>{a.d(A,{e:()=>M});var t=a(74848),L=a(55852);const M=({isCollapsed:m,onToggle:b,idControlled:$,className:d,text:S,size:P="xl",...K})=>(0,t.jsx)(L.$n,{type:"button",fill:"text",variant:"secondary","aria-expanded":!m,"aria-controls":$,className:d,icon:m?"angle-right":"angle-down",onClick:()=>b(!m),...K,children:S})},53666:(oe,A,a)=>{a.r(A),a.d(A,{default:()=>ht});var t=a(74848),L=a(66602),M=a(37959),m=a(32196),b=a(96540),$=a(12470),d=a(80943),S=a(52622),P=a(56034),K=a(55852),N=a(40845),v=a(94753),B=a(14578),g=a(8484),w=a(25027),le=a(74856),ce=a(99140),z=a(29333),de=a(24180),ue=a(49185),k=a(42418),ge=a(57514),F=a(67061),me=a(19384),T=a(94822),he=a(98439),O=a(98164),ye=a(57220),G=a(32642),fe=a(3704),xe=a(69087),ve=a(64047),E=a(14084),V=a(2543),pe=a(730),je=a(18461),Ce=a(55196),Fe=a(50509),Te=a(95584),be=a(285),Se=a(17172),Ne=a(7392),Ee=a(56361);function q({error:e}){if((0,Se.NF)(e)&&e.status===404)return(0,t.jsx)(Ne.L,{entity:"History"});const n=(0,g.t)("alerting.central-alert-history.error","Something went wrong loading the alert state history"),s=(0,Ee.JZ)(e);return(0,t.jsx)(k.F,{title:n,children:s})}var I=a(11261),Ie=a(25019),Pe=a(50082),we=a(57875),_=a(48241);const ee=10*1e3,W="var-";function Re(e){const n=Le(),s=$e(),r=n===""?x.all:n,i=s===""?x.all:s,c=e?.data?.values[0]??[],l=(0,E.bF)(c)?c:[],o=e?.data?.values[1]??[],h=l.reduce((u,f,j)=>{const C=o[j];if((0,E.PA)(C)){if(!(0,T.s1)(C.current))return u;const R=(0,T.lh)(C.current),X=(0,T.lh)(C.previous),Y=r!==x.all?r===R:!0,yt=i!==x.all?i===X:!0;Y&&yt&&u.push({timestamp:f,line:C})}return u},[]),y=(0,V.groupBy)(h,u=>JSON.stringify(u.line.labels)),p=Object.entries(y).map(([u,f])=>Oe(u,f));return Be(p)}function Ae(){return new URLSearchParams(window.location.search).get(`${W}${J}`)??""}function Le(){return new URLSearchParams(window.location.search).get(`${W}${Q}`)??""}function $e(){return new URLSearchParams(window.location.search).get(`${W}${Z}`)??""}function Be(e){const n=Ae(),r=e.filter(o=>{const h=JSON.parse(o.name??""),y=n?(0,G.Zc)(n):[];return(0,O.Av)(h,y)}).flatMap(o=>o.fields.find(h=>h.name==="time")),i=(0,V.groupBy)(r?.flatMap(o=>o?.values),o=>Math.floor(o/ee)*ee),c={name:"time",type:I.PU.time,values:Object.keys(i).map(Number),config:{displayName:"Time",custom:{fillOpacity:100}}},l={name:"value",type:I.PU.number,values:Object.values(i).map(o=>o.length),config:{}};return[{fields:[c,l],length:c.values.length}]}function Oe(e,n){const s={name:"time",type:I.PU.time,values:[...n.map(c=>c.timestamp)],config:{displayName:"Time",custom:{fillOpacity:100}}},r=s.values.map((c,l)=>l);return r.sort((0,_.i)(s)),{fields:[{...s,values:s.values.map((c,l)=>s.values[r[l]])},{name:e,type:I.PU.number,values:s.values.map(c=>1),config:{}}],length:s.values.length,name:e}}function Ve(e,n){const s={name:"time",type:I.PU.time,values:[...e.map(l=>l.timestamp),Date.now()],config:{displayName:"Time",custom:{fillOpacity:100}}},r=s.values.map((l,o)=>o);r.sort((0,_.i)(s));const i=[...e.map(l=>l.line.current),e.at(-1)?.line.current],c={fields:[{...s,values:s.values.map((l,o)=>s.values[r[o]])},{name:"State",type:I.PU.string,values:i.map((l,o)=>i[r[o]]),config:{displayName:"State",color:{mode:"thresholds"},custom:{fillOpacity:100},mappings:[{type:Ie.d.ValueToText,options:{Alerting:{color:n.colors.error.main},Pending:{color:n.colors.warning.main},Normal:{color:n.colors.success.main},NoData:{color:n.colors.info.main}}}],thresholds:{mode:Pe.O.Absolute,steps:[]}}}],length:s.values.length,name:""};return c.fields.forEach(l=>{l.display=(0,we.J)({field:l,theme:n})}),c}function He({record:e,addFilter:n,timeRange:s}){(0,b.useEffect)(()=>{(0,w.iW)()},[]);const r=e.line?.ruleUID??"",i=e.line?.labels,c=(0,b.useMemo)(()=>(0,je.qg)(r,!0),[r]),{error:l,loading:o,result:h}=(0,pe.ZU)({ruleIdentifier:c,limitAlerts:0});return l?(0,t.jsx)(v.E,{children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.error",children:"Error loading rule for this event."})}):o?(0,t.jsx)(v.E,{children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.loading",children:"Loading..."})}):h?(0,t.jsxs)(F.B,{direction:"column",gap:.5,children:[(0,t.jsxs)(F.B,{direction:"row",gap:6,children:[(0,t.jsx)(Me,{record:e,addFilter:n}),(0,t.jsx)(ze,{record:e})]}),(0,t.jsx)(Ke,{rule:h}),(0,t.jsx)(Ue,{ruleUID:r,timeRange:s,labels:i??{}})]}):(0,t.jsx)(v.E,{children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.not-found",children:"Rule not found for this event."})})}function De(e,n){const s=(0,N.$j)();return(0,b.useMemo)(()=>{const r=n?.data?.values[0]??[],i=(0,E.bF)(r)?r:[],c=n?.data?.values[1]??[],l=i.reduce((u,f,j)=>{const C=c[j];return(0,E.PA)(C)&&u.push({timestamp:f,line:C}),u},[]),o=(0,V.groupBy)(l,u=>JSON.stringify(u.line.labels)),h=(0,G.Zc)(e),y=Object.entries(o).filter(([u])=>{const f=JSON.parse(u);return(0,O.Av)(f,h)});return{dataFrames:Object.values(y).map(u=>Ve(u[1],s))}},[n,e,s])}function Ue({ruleUID:e,timeRange:n,labels:s}){const{useGetRuleHistoryQuery:r}=z.U,{currentData:i,isLoading:c,isError:l,error:o}=r({ruleUid:e,from:n.from.unix(),to:n.to.unix(),limit:H},{refetchOnFocus:!0,refetchOnReconnect:!0}),{dataFrames:h}=De(s?Object.entries(s).map(([f,j])=>`${f}=${j}`).join(","):"",i),{frameSubset:y,frameTimeRange:p}=(0,be.useFrameSubset)(h);if(c)return(0,t.jsx)("div",{children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.loading",children:"Loading..."})});if(l)return(0,t.jsx)(q,{error:o});if(!y||y.length===0)return null;const u=h[0]?.fields[0]?.values?.length-1;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ge,{transitions:e?u:0}),(0,t.jsx)(Te.A,{frames:y,timeRange:p})]})}function Me({record:e,addFilter:n}){return(0,t.jsxs)(F.B,{gap:.5,direction:"column",children:[(0,t.jsx)(v.E,{variant:"body",weight:"light",color:"secondary",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.state-transitions",children:"State transition"})}),(0,t.jsxs)(F.B,{gap:.5,direction:"row",alignItems:"center",children:[(0,t.jsx)(D,{state:e.line.previous,showLabel:!0,addFilter:n,type:"from"}),(0,t.jsx)(B.I,{name:"arrow-right",size:"lg"}),(0,t.jsx)(D,{state:e.line.current,showLabel:!0,addFilter:n,type:"to"})]})]})}const Ke=({rule:e})=>{const n=(0,N.of)(te),s=e.annotations;return!s||Object.keys(s).length===0?null:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:n.metadataWrapper,children:Object.entries(s).map(([r,i])=>{const c=(0,V.capitalize)(r);return(0,t.jsxs)(Ce.P,{direction:"column",children:[c,(0,t.jsx)(Fe.$,{value:i})]},c)})})})};function ze({record:e}){const n=e?.line?.values?JSON.stringify(e.line.values):(0,g.t)("alerting.central-alert-history.details.no-values","No values");return(0,t.jsxs)(F.B,{gap:.5,direction:"column",children:[(0,t.jsx)(v.E,{variant:"body",weight:"light",color:"secondary",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.value-in-transition",children:"Value in transition"})}),(0,t.jsx)(F.B,{gap:.5,direction:"row",alignItems:"center",children:(0,t.jsx)(v.E,{variant:"body",weight:"light",children:n})})]})}function Ge({transitions:e}){const n=(0,N.of)(te);return(0,t.jsxs)("div",{className:n.transitionsNumber,children:[(0,t.jsx)(v.E,{variant:"body",weight:"bold",color:"secondary",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.number-transitions",children:"State transitions for selected period:"})}),(0,t.jsx)(v.E,{variant:"body",weight:"light",children:e})]})}const te=e=>({metadataWrapper:(0,m.css)({display:"grid",gridTemplateColumns:"auto auto",rowGap:e.spacing(3),columnGap:e.spacing(12)}),transitionsNumber:(0,m.css)({display:"flex",flexDirection:"row",gap:e.spacing(.5),alignItems:"center",marginTop:e.spacing(1.5)})}),H=5e3,We=100,ne=({timeRange:e,valueInLabelFilter:n,valueInStateToFilter:s,valueInStateFromFilter:r,addFilter:i})=>{const c=e?.from.unix(),l=e?.to.unix(),{data:o,isLoading:h,isError:y,error:p}=z.U.endpoints.getRuleHistory.useQuery({from:c,to:l,limit:H}),{historyRecords:u}=tt(n.toString(),s.toString(),r.toString(),o),f=u.sort((C,R)=>R.timestamp-C.timestamp);if(y)return(0,t.jsx)(q,{error:p});const j=!h&&o?.data?.values?.[0]?.length===H;return j&&(0,w.Hs)({from:c,to:l}),(0,t.jsxs)(t.Fragment,{children:[j&&(0,t.jsx)(k.F,{severity:"warning",title:(0,g.t)("alerting.central-alert-history.too-many-events.title","Unable to display all events"),children:(0,g.t)("alerting.central-alert-history.too-many-events.text","The selected time period has too many events to display. Diplaying the latest 5000 events. Try using a shorter time period.")}),(0,t.jsx)(Je,{visible:h}),(0,t.jsx)(Qe,{logRecords:f,addFilter:i,timeRange:e})]})},Je=({visible:e=!1})=>{const[n,{width:s}]=(0,ue.A)();return(0,t.jsx)("div",{ref:n,children:e&&(0,t.jsx)(ge.G,{width:s,"data-testid":"loading-bar"})})};function Qe({logRecords:e,addFilter:n,timeRange:s}){const{page:r,pageItems:i,numberOfPages:c,onPageChange:l}=(0,he.W)(e,1,We);return(0,t.jsxs)(F.B,{direction:"column",gap:0,children:[(0,t.jsx)(Ze,{}),(0,t.jsx)("ul",{children:i.map(o=>(0,t.jsx)(Xe,{record:o,addFilter:n,timeRange:s},o.timestamp+(o.line.fingerprint??"")))}),(0,t.jsx)(me.d,{currentPage:r,numberOfPages:c,onNavigate:l,hideWhenSinglePage:!0})]})}function Ze(){const e=(0,N.of)(U);return(0,t.jsx)("div",{className:e.headerWrapper,children:(0,t.jsxs)("div",{className:e.mainHeader,children:[(0,t.jsx)("div",{className:e.timeCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.header.timestamp",children:"Timestamp"})})}),(0,t.jsx)("div",{className:e.transitionCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.header.state",children:"State"})})}),(0,t.jsx)("div",{className:e.alertNameCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.header.alert-rule",children:"Alert rule"})})}),(0,t.jsx)("div",{className:e.labelsCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.header.instance",children:"Instance"})})})]})})}function Xe({record:e,addFilter:n,timeRange:s}){const r=(0,N.of)(U),[i,c]=(0,b.useState)(!0);function l(o,h){n(o,h,"label")}return(0,t.jsxs)(F.B,{direction:"column",gap:0,children:[(0,t.jsxs)("div",{className:(0,m.cx)(r.header,i?r.collapsedHeader:r.notCollapsedHeader),"data-testid":"event-row-header",children:[(0,t.jsx)(ve.e,{size:"sm",className:r.collapseToggle,isCollapsed:i,onToggle:c}),(0,t.jsxs)(F.B,{gap:.5,direction:"row",alignItems:"center",children:[(0,t.jsx)("div",{className:r.timeCol,children:(0,t.jsx)(qe,{time:e.timestamp})}),(0,t.jsx)("div",{className:r.transitionCol,children:(0,t.jsx)(ke,{previous:e.line.previous,current:e.line.current,addFilter:n})}),(0,t.jsx)("div",{className:r.alertNameCol,children:e.line.labels?(0,t.jsx)(Ye,{labels:e.line.labels,ruleUID:e.line.ruleUID}):null}),(0,t.jsx)("div",{className:r.labelsCol,children:(0,t.jsx)(xe.m,{labels:e.line.labels??{},size:"xs",onClick:l})})]})]}),!i&&(0,t.jsx)("div",{className:r.expandedRow,children:(0,t.jsx)(He,{record:e,addFilter:n,timeRange:s})})]})}function Ye({labels:e,ruleUID:n}){const s=(0,N.of)(U),{pathname:r,search:i}=(0,de.zy)(),c=`${r}${i}`,l=e.alertname;if(!n)return(0,t.jsx)(v.E,{children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.unknown-rule",children:"Unknown"})});const o=(0,fe.G)(`/alerting/${ye.hY}/${n}/view`,{tab:"history",returnTo:c});return(0,t.jsx)(P.m,{content:l??"",children:(0,t.jsx)("a",{href:o,className:s.alertName,children:l})})}function ke({previous:e,current:n,addFilter:s}){return(0,t.jsxs)(F.B,{gap:.5,direction:"row",children:[(0,t.jsx)(D,{state:e,addFilter:s,type:"from"}),(0,t.jsx)(B.I,{name:"arrow-right",size:"lg"}),(0,t.jsx)(D,{state:n,addFilter:s,type:"to"})]})}const se=({iconName:e,iconColor:n,tooltipContent:s,labelText:r,showLabel:i})=>(0,t.jsx)(P.m,{content:s,placement:"top",children:(0,t.jsxs)(F.B,{gap:.5,direction:"row",alignItems:"center",children:[(0,t.jsx)(B.I,{name:e,size:"md",className:n}),i&&(0,t.jsx)(v.E,{variant:"body",weight:"light",children:r})]})});function D({state:e,showLabel:n=!1,addFilter:s,type:r}){const i=(0,N.of)(U),c=(0,g.t)("alerting.central-alert-history.details.no-recognized-state","No recognized state");if(!(0,T.s1)(e)&&!(0,T.qr)(e))return(0,t.jsx)(se,{iconName:"exclamation-triangle",tooltipContent:c,labelText:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.unknown-event-state",children:"Unknown"}),showLabel:n,iconColor:i.warningColor});const l=(0,T.lh)(e),o=(0,T.$k)(e),h={Normal:{iconName:"check-circle",iconColor:o?i.warningColor:i.normalColor,tooltipContent:o?`Normal (${o})`:"Normal",labelText:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.state.normal",children:"Normal"})},Alerting:{iconName:"exclamation-circle",iconColor:i.alertingColor,tooltipContent:"Alerting",labelText:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.state.alerting",children:"Alerting"})},NoData:{iconName:"exclamation-triangle",iconColor:i.warningColor,tooltipContent:"Insufficient data",labelText:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.state.no-data",children:"No data"})},Error:{iconName:"exclamation-circle",tooltipContent:"Error",iconColor:i.warningColor,labelText:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.state.error",children:"Error"})},Pending:{iconName:"circle",iconColor:i.warningColor,tooltipContent:o?`Pending (${o})`:"Pending",labelText:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.details.state.pending",children:"Pending"})}};function y(){s("state",l,r==="from"?"stateFrom":"stateTo")}const p=h[l]||{iconName:"exclamation-triangle",tooltipContent:"Unknown State"};return(0,t.jsx)("div",{onClick:y,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&y()},className:i.state,role:"button",tabIndex:0,children:(0,t.jsx)(se,{...p,showLabel:n})})}const qe=({time:e})=>{const s=new Date(e).toLocaleString("en-US",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(0,t.jsx)(v.E,{variant:"body",weight:"light",children:s})},ft=(0,L.Xc)(ne,{style:"page"}),U=e=>({header:(0,m.css)({display:"flex",flexDirection:"row",alignItems:"center",padding:`${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} 0`,flexWrap:"nowrap","&:hover":{backgroundColor:e.components.table.rowHoverBackground}}),collapsedHeader:(0,m.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),notCollapsedHeader:(0,m.css)({borderBottom:"none"}),collapseToggle:(0,m.css)({background:"none",border:"none",marginTop:`-${e.spacing(1)}`,marginBottom:`-${e.spacing(1)}`,svg:{marginBottom:0}}),normalColor:(0,m.css)({fill:e.colors.success.text}),warningColor:(0,m.css)({fill:e.colors.warning.text}),alertingColor:(0,m.css)({fill:e.colors.error.text}),timeCol:(0,m.css)({width:"150px"}),transitionCol:(0,m.css)({width:"80px"}),alertNameCol:(0,m.css)({width:"300px"}),labelsCol:(0,m.css)({display:"flex",overflow:"hidden",alignItems:"center",paddingRight:e.spacing(2),flex:1}),alertName:(0,m.css)({whiteSpace:"nowrap",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",display:"block",color:e.colors.text.link}),expandedRow:(0,m.css)({padding:e.spacing(2),marginLeft:e.spacing(2),borderLeft:`1px solid ${e.colors.border.weak}`}),colorIcon:(0,m.css)({color:e.colors.primary.text,"&:hover":{opacity:.8}}),state:(0,m.css)({"&:hover":{opacity:.8,cursor:"pointer"}}),headerWrapper:(0,m.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),mainHeader:(0,m.css)({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"nowrap",marginLeft:"30px",padding:`${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} 0`,gap:e.spacing(.5)})});class _e extends d.Bs{static{this.Component=et}constructor(){super({})}}function et({model:e}){const{value:n}=d.jh.getTimeRange(e).useState(),s=d.jh.lookupVariable(J,e),r=d.jh.lookupVariable(Q,e),i=d.jh.lookupVariable(Z,e),c=s.getValue(),l=r.getValue(),o=i.getValue(),h=(y,p,u)=>{const f=`${y}=${p}`;(0,w.P6)({type:u,key:y,value:p}),u==="stateTo"&&r.changeValueTo(p),u==="stateFrom"&&i.changeValueTo(p);const j=(0,O.EU)(c.toString(),f);u==="label"&&s.setValue(j)};return(0,t.jsx)(ne,{timeRange:n,valueInLabelFilter:c,addFilter:h,valueInStateToFilter:l,valueInStateFromFilter:o})}function tt(e,n,s,r){return(0,b.useMemo)(()=>{if(!r?.data)return{historyRecords:[]};const i=e?(0,G.Zc)(e):[],[c,l]=r.data.values;return{historyRecords:((0,E.bF)(c)?c:[]).reduce((y,p,u)=>{const f=l[u];if(!(0,E.PA)(f))return y;const j=f.labels&&(0,O.Av)(f.labels,i);if(!(0,T.s1)(f.current)||!(0,T.s1)(f.previous))return y;const C=(0,T.lh)(f.current),R=(0,T.lh)(f.previous),X=n!==x.all?n===C:!0,Y=s!==x.all?s===R:!0;return j&&X&&Y&&y.push({timestamp:p,line:f}),y},[])}},[r,e,n,s])}const re="__history_api_ds_uid__",ae="__history_api_ds_pluginId__",nt={type:ae,uid:re,settings:void 0};function st(){const e=(0,b.useMemo)(()=>new rt(re,ae),[]);(0,b.useEffect)(()=>{try{d.Go.registerRuntimeDataSource({dataSource:e})}catch{}},[e])}class rt extends d.UU{constructor(n,s){super(s,n)}async query(n){const s=n.range.from.unix(),r=n.range.to.unix();return{data:Re(await at(s,r))}}testDatasource(){return Promise.resolve({status:"success",message:"Data source is working",title:"Success"})}}const at=(e,n)=>(0,ce.JD)(z.U.endpoints.getRuleHistory.initiate({from:e,to:n,limit:H},{forceRefetch:!!(0,le.jG)().getAutoRefreshInteval().interval})).unwrap(),J="labelsFilter",Q="stateFilterTo",Z="stateFilterFrom",x={all:"all",firing:"Alerting",normal:"Normal",pending:"Pending"},it=()=>{(0,b.useEffect)(()=>{(0,w.fH)(w.le.loadedCentralAlertStateHistory)},[]);const e=new d.TS({name:J,label:"Labels: "}),n=new d.yP({name:Q,value:x.all,label:"End state:",hide:$.zL.dontHide,query:`All : ${x.all}, To Firing : ${x.firing},To Normal : ${x.normal},To Pending : ${x.pending}`}),s=new d.yP({name:Z,value:x.all,label:"Start state:",hide:$.zL.dontHide,query:`All : ${x.all}, From Firing : ${x.firing},From Normal : ${x.normal},From Pending : ${x.pending}`});st();const r=new d.P1({controls:[new d.dM({component:ut}),new d.dM({component:gt}),new d.K8({}),new d.dM({component:dt,props:{labelsFilterVariable:e,transitionsToFilterVariable:n,transitionsFromFilterVariable:s}}),new d.N0,new d.KE({}),new d.WM({})],$timeRange:new d.JZ({from:"now-1h",to:"now"}),$variables:new d.Pj({variables:[e,s,n]}),body:new d.G1({direction:"column",children:[new d.vA({ySizing:"content",body:ot(nt)}),new d.vA({body:new _e})]})});return(0,d.Yg)(r)?(0,t.jsx)(r.Component,{model:r}):null};function ot(e){return new d.P1({controls:[],body:new d.G1({direction:"column",children:[new d.vA({ySizing:"content",body:new d.G1({children:[ct(e)]})})]})})}function lt(e){return new d.dt({datasource:e,queries:[{refId:"A",expr:"",queryType:"range",step:"10s"}]})}function ct(e){return new d.vA({minHeight:300,body:d.d0.timeseries().setTitle("Alert Events").setDescription("Each alert event represents an alert instance that changed its state at a particular point in time. The history of the data is displayed over a period of time.").setData(lt(e)).setColor({mode:"continuous-BlPu"}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("drawStyle",S.GR.Bars).setCustomFieldConfig("lineInterpolation",S.dx.Linear).setCustomFieldConfig("lineWidth",1).setCustomFieldConfig("barAlignment",0).setCustomFieldConfig("spanNulls",!1).setCustomFieldConfig("insertNulls",!1).setCustomFieldConfig("showPoints",S.yL.Auto).setCustomFieldConfig("pointSize",5).setCustomFieldConfig("stacking",{mode:S.gs.None,group:"A"}).setCustomFieldConfig("gradientMode",S.on.Hue).setCustomFieldConfig("scaleDistribution",{type:S.L4.Linear}).setOption("legend",{showLegend:!1,displayMode:S.lm.Hidden}).setOption("tooltip",{mode:S.$N.Single}).setNoValue("No events found").build()})}function dt({labelsFilterVariable:e,transitionsToFilterVariable:n,transitionsFromFilterVariable:s}){const r=e.getValue(),i=n.getValue(),c=s.getValue();if(!r&&i===x.all&&c===x.all)return null;const l=()=>{e.setValue(""),n.changeValueTo(x.all),s.changeValueTo(x.all)};return(0,t.jsx)(P.m,{content:"Clear filter",children:(0,t.jsx)(K.$n,{variant:"secondary",icon:"times",onClick:l,children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.filter.clear",children:"Clear filters"})})})}const ut=()=>{const e=(0,N.of)(ie);return(0,t.jsx)("div",{className:e.filterLabelContainer,children:(0,t.jsx)(v.E,{variant:"body",weight:"light",color:"secondary",children:(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.filterBy",children:"Filter by:"})})})},gt=()=>{const e=(0,N.of)(ie);return(0,t.jsx)("div",{className:e.filterInfoContainer,children:(0,t.jsx)(P.m,{content:(0,t.jsxs)("div",{children:[(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.filter.info.label1",children:"Filter events using label querying without spaces, ex:"}),(0,t.jsx)("pre",{children:'{severity="critical", instance=~"cluster-us-.+"}'}),(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.filter.info.label2",children:"Invalid use of spaces:"}),(0,t.jsx)("pre",{children:'{severity= "critical"}'}),(0,t.jsx)("pre",{children:'{severity ="critical"}'}),(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.filter.info.label3",children:"Valid use of spaces:"}),(0,t.jsx)("pre",{children:'{severity=" critical"}'}),(0,t.jsx)(g.x6,{i18nKey:"alerting.central-alert-history.filter.info.label4",children:"Filter alerts using label querying without braces, ex:"}),(0,t.jsx)("pre",{children:'severity="critical", instance=~"cluster-us-.+"'})]}),children:(0,t.jsx)(B.I,{name:"info-circle",size:"sm"})})})},ie=e=>({filterInfoContainer:(0,m.css)({padding:"0",alignSelf:"center",marginRight:e.spacing(-1)}),filterLabelContainer:(0,m.css)({padding:"0",alignSelf:"center"})}),mt=()=>(0,t.jsx)(M.d,{navId:"alerts-history",isLoading:!1,children:(0,t.jsx)(it,{})}),ht=(0,L.Xc)(mt,{style:"page"})}}]);

//# sourceMappingURL=HistoryPage.7c09f55d4e6bec8ad261.js.map