"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3772],{54391:(Ie,ie,n)=>{n.d(ie,{R:()=>A});var T=n(74848),W=n(32196),J=n(96540),y=n(40845),w=n(14578),Z=n(10354),R=n(72093);const A=({name:L,onChange:Y,verifyLayerNameUniqueness:k,overrideStyles:ze})=>{const q=(0,y.of)(le),[G,he]=(0,J.useState)(!1),[U,oe]=(0,J.useState)(null),_=D=>{he(!0)},I=D=>{if(he(!1),U){oe(null);return}L!==D&&Y(D)},j=D=>{const re=D.currentTarget.value.trim();if(re.length===0){oe("An empty layer name is not allowed");return}if(k&&!k(re)&&re!==L){oe("Layer name already exists");return}U&&oe(null)},je=D=>{I(D.currentTarget.value.trim())},Ce=D=>{D.key==="Enter"&&I(D.currentTarget.value)},Oe=D=>{D.target.select()};return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("div",{className:q.wrapper,children:[!G&&(0,T.jsxs)("button",{className:q.layerNameWrapper,title:"Edit layer name",onClick:_,"data-testid":"layer-name-div",children:[(0,T.jsx)("span",{className:ze?"":q.layerName,children:L}),(0,T.jsx)(w.I,{name:"pen",className:q.layerEditIcon,size:"sm"})]}),G&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Z.p,{type:"text",defaultValue:L,onBlur:je,autoFocus:!0,onKeyDown:Ce,onFocus:Oe,invalid:U!==null,onChange:j,className:q.layerNameInput,"data-testid":"layer-name-input"}),U&&(0,T.jsx)(R.P,{horizontal:!0,children:U})]})]})})},le=L=>({wrapper:(0,W.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:L.spacing(.5)}),layerNameWrapper:(0,W.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:L.shape.radius.default,alignItems:"center",padding:`0 0 0 ${L.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:L.colors.action.hover,border:`1px dashed ${L.colors.border.strong}`},"&:focus":{border:`2px solid ${L.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,W.css)({fontWeight:L.typography.fontWeightMedium,color:L.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:L.spacing(.5)}),layerEditIcon:(0,W.cx)((0,W.css)({marginLeft:L.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,W.css)({maxWidth:"300px",margin:"-4px 0"})})},735:(Ie,ie,n)=>{n.d(ie,{Q9:()=>J,QB:()=>w,it:()=>W});var T=n(52622),W=(R=>(R.Auto="auto",R.Manual="manual",R))(W||{}),J=(R=>(R.Lines="lines",R.Points="points",R.PointsAndLines="points+lines",R))(J||{});const y={exclude:[]},w={label:T.yL.Auto,show:"points"},Z={series:[]}},80983:(Ie,ie,n)=>{n.r(ie),n.d(ie,{plugin:()=>Mt});var T=n(65158),W=n(89654),J=n(22680),y=n(74848),w=n(32196),Z=n(96540),R=n(84596),A=n(1173),le=n(27310),L=n(28240),Y=n(11261),k=n(40845),ze=n(55852),q=n(29158),G=n(88575),he=n(90182),U=n(76218),oe=n(54391),_=(e=>(e.Circle="circle",e.Square="square",e))(_||{}),I=(e=>(e.Auto="auto",e.Manual="manual",e))(I||{}),j=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(j||{});const je={id:""},Ce={fillOpacity:50,show:"points"},Oe={series:[]},D=({value:e,onChange:a,context:l})=>{const f=(0,k.of)(re),c=l.options?.mapping,u=(0,R.A)(c),h=u!=null&&c!==u,d={frame:{matcher:{id:A.jR.byIndex,options:0}}},[o,p]=(0,Z.useState)(0);(h||e==null)&&(e=[{...d}],a([...e]),o>0&&p(0));const x=()=>{e=e.concat({...d}),p(e.length-1),a([...e])},N=i=>{e=e.filter((t,r)=>r!==i),p(0),a([...e])},m=e[o],E=`${c}${o}`,s=c===I.Manual?le.X4.ExcludeBaseNames:l.data.length===1?le.X4.IncludeAll:le.X4.OnlyBaseNames;return l.data.forEach((i,t)=>{i.fields.forEach((r,S)=>{r.state={...r.state,origin:{frameIndex:t,fieldIndex:S}}})}),(0,y.jsxs)(y.Fragment,{children:[c===I.Manual&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ze.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:x,className:f.marginBot,children:"Add series"}),(0,y.jsx)("div",{className:f.marginBot,children:e.map((i,t)=>(0,y.jsxs)("div",{className:t===o?`${f.row} ${f.sel}`:f.row,onClick:()=>p(t),role:"button","aria-label":`Select series ${t+1}`,tabIndex:0,onKeyPress:r=>{r.key==="Enter"&&p(t)},children:[(0,y.jsx)(oe.R,{name:i.name?.fixed??`Series ${t+1}`,onChange:r=>{i.name={fixed:r===""||r===`Series ${t+1}`?void 0:r},a([...e])}}),(0,y.jsx)(q.K,{name:"trash-alt",title:"remove",className:(0,w.cx)(f.actionIcon),onClick:()=>N(t),tooltip:"Delete series"})]},`series/${t}`))})]}),o>=0&&m!=null&&(0,y.jsxs)(Z.Fragment,{children:[(0,y.jsx)(G.D,{label:"Frame",children:(0,y.jsx)(he.l6,{placeholder:c===I.Auto?"All frames":"Select frame",isClearable:!0,options:l.data.map((i,t)=>({value:t,label:`${(0,L.Ri)(i,t)} (index: ${t}, rows: ${i.length})`})),value:m.frame?.matcher.options,onChange:i=>{i==null?delete m.frame:m.frame={matcher:{id:A.jR.byIndex,options:Number(i.value)}},a([...e])}})}),(0,y.jsx)(G.D,{label:"X field",children:(0,y.jsx)(U.O,{value:m.x?.matcher.options,context:l,onChange:i=>{i==null?delete m.x:m.x={matcher:{id:A.Ct.byName,options:i}},a([...e])},item:{id:"x",name:"x",settings:{filter:i=>(c===I.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===Y.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:c===I.Auto?"First number field in each frame":void 0}}})}),(0,y.jsx)(G.D,{label:"Y field",children:(0,y.jsx)(U.O,{value:m.y?.matcher?.options,context:l,onChange:i=>{i==null?delete m.y:m.y={matcher:{id:A.Ct.byName,options:i}},a([...e])},item:{id:"y",name:"y",settings:{filter:i=>(c===I.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===Y.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:c===I.Auto?"Remaining number fields in each frame":void 0}}})}),(0,y.jsx)(G.D,{label:"Size field",children:(0,y.jsx)(U.O,{value:m.size?.matcher?.options,context:l,onChange:i=>{i==null?delete m.size:m.size={matcher:{id:A.Ct.byName,options:i}},a([...e])},item:{id:"size",name:"size",settings:{filter:i=>i.name!==m.x?.matcher.options&&(c===I.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===Y.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:""}}})}),(0,y.jsx)(G.D,{label:"Color field",children:(0,y.jsx)(U.O,{value:m.color?.matcher?.options,context:l,onChange:i=>{i==null?delete m.color:m.color={matcher:{id:A.Ct.byName,options:i}},a([...e])},item:{id:"color",name:"color",settings:{filter:i=>i.name!==m.x?.matcher.options&&(c===I.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===Y.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:""}}})})]},E)]})},re=e=>({marginBot:(0,w.css)({marginBottom:"20px"}),row:(0,w.css)({padding:`${e.spacing(.5,1)}`,borderRadius:`${e.shape.radius.default}`,background:`${e.colors.background.secondary}`,minHeight:`${e.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${e.components.input.borderColor}`,"&:hover":{border:`1px solid ${e.components.input.borderHover}`}}),sel:(0,w.css)({border:`1px solid ${e.colors.primary.border}`,"&:hover":{border:`1px solid ${e.colors.primary.border}`}}),actionIcon:(0,w.css)({color:`${e.colors.text.secondary}`,"&:hover":{color:`${e.colors.text}`}})});var ne=n(24293),Q=n(23596),Te=n(32264),De=n(67266),Qe=n(96516),Je=n(81297),O=n(52622),$e=n(38761),ke=n(16895),qe=n(11389),_e=n(58749),et=n(52415),tt=n(79871),it=n(21164),lt=n(22731),Ne=n(83195),pe=n(85200);function de(e,a){return e.display?(0,Ne.cN)(e.display(a)):`${a}`}function ot(e){return e.id===A.jR.byIndex?(a,l)=>l===e.options:()=>!1}function nt(e,a,l,f){(0,L.Fm)(l),(0,L.j2)(l,f);let c=[];a.length===0&&(a=[{}]);const{palette:u,getColorByName:h}=Te.$.theme2.visualization;if(a.forEach((d,o)=>{if(e===I.Manual&&(d.frame?.matcher==null||d.x?.matcher==null||d.y?.matcher==null))return;let p=(0,pe.NS)(d.x?.matcher??{id:A.Ct.byType,options:"number"}),x=(0,pe.NS)(d.y?.matcher??{id:A.Ct.byType,options:"number"}),N=d.color?(0,pe.NS)(d.color.matcher):null,m=d.size?(0,pe.NS)(d.size.matcher):null,E=d.frame?ot(d.frame.matcher):null;l.forEach((s,i)=>{if(E!=null&&!E(s,i))return;let t=[],r=[],S=s.fields.filter(v=>v.type===Y.PU.number),z=S.find(v=>p(v,s,l)),g=N!=null?S.find(v=>v!==z&&N(v,s,l)):void 0,C=m!=null?S.find(v=>v!==z&&v!==g&&m(v,s,l)):void 0;z!=null&&(S.forEach(v=>{if(v!==z&&!(e===I.Auto&&(v===g||v===C))&&!(e===I.Manual&&r.length>0)&&x(v,s,l)&&!v.config.custom?.hideFrom?.viz){let M=v,b={name:{value:d.name?.fixed??(0,L.Ct)(M,s,l)},showPoints:M.config.custom.show===j.Lines?O.yL.Never:O.yL.Always,pointShape:M.config.custom.pointShape,pointStrokeWidth:M.config.custom.pointStrokeWidth,fillOpacity:M.config.custom.fillOpacity,showLine:M.config.custom.show!==j.Points,lineWidth:M.config.custom.lineWidth??2,lineStyle:M.config.custom.lineStyle,x:{field:z},y:{field:M},color:{},size:{},_rest:t};g!=null&&(b.color.field=g),C!=null&&(b.size.field=C,b.size.min=C.config.custom.pointSize?.min??5,b.size.max=C.config.custom.pointSize?.max??100),r.push(b)}}),r.length,s.fields.forEach(v=>{r.some(({x:F,y:b,color:V,size:P})=>F.field===v||b.field===v||V.field===v||P.field===v)||t.push(v)}),c.push(...r))})}),c.length!==0){let d=0;c.forEach((o,p)=>{if(o.color.field==null){let x=o.y.field.config.color??{mode:ne.Y.PaletteClassic},N="";x.mode===ne.Y.PaletteClassic?N=h(u[d++%u.length]):x.mode===ne.Y.Fixed&&(N=h(x.fixedColor)),o.color.fixed=N}o.size.field==null&&(o.size.fixed=o.y.field.config.custom.pointSize?.fixed??5)}),at(c)}return c}function at(e){let a=e.map(c=>c.name.value.split(/\s+/g));const{prefix:l,suffix:f}=Ve(a);(l<1/0||f<1/0)&&e.forEach((c,u)=>{c.name.value=a[u].slice(l,a[u].length-f).join(" ")})}function Re(e){let a=e.map(h=>h.split(/\s+/g)),{prefix:l,suffix:f}=Ve(a),c=a[0];if(c.length===1&&l===1&&f===1)return"";let u=[];return l>0&&u.push(...c.slice(0,l)),f>0&&u.push(...c.slice(-f)),u.join(" ")}function Ve(e){let a=1/0,l=1/0,f=e[0];for(let c=1;c<e.length;c++)e[c].length<f.length&&(f=e[c]);for(let c=1;c<e.length;c++){let u=e[c];if(u!==f){let h=0;for(let o=0;o<f.length&&u[o]===f[o];o++)h++;h<a&&(a=h);let d=0;for(let o=f.length-1;o>=0&&u[o]===f[o];o--)d++;d<l&&(l=d)}}return{prefix:a,suffix:l}}function ce(e,a){return e!==a&&e.includes(" ")&&(e=e.replace(a,"").trim()),e}const st=({dataIdxs:e,seriesIdx:a,data:l,xySeries:f,dismiss:c,isPinned:u})=>{const h=(0,k.of)(lt.$),d=e.find(S=>S!==null),o=f[a-1],p=o.x.field,x=o.y.field,N=o.size.field,m=o.color.field;let E=o.name.value,s=o.color.fixed;const i={label:E,value:"",color:(0,Q.X4)(s??"#fff",.5),colorIndicator:tt.fX.marker_md},t=[{label:ce(p.state?.displayName??p.name,E),value:de(p,p.values[d])},{label:ce(x.state?.displayName??x.name,E),value:de(x,x.values[d])}];N!=null&&N!==x&&t.push({label:ce(N.state?.displayName??N.name,E),value:de(N,N.values[d])}),m!=null&&m!==x&&t.push({label:ce(m.state?.displayName??m.name,E),value:de(m,m.values[d])}),o._rest.forEach(S=>{t.push({label:ce(S.state?.displayName??S.name,E),value:de(S,S.values[d])})});let r;if(u&&a!=null){const S=(0,it.u)(x,d);r=(0,y.jsx)(_e.S,{dataLinks:S})}return(0,y.jsxs)("div",{className:h.wrapper,children:[(0,y.jsx)(et.A,{item:i,isPinned:u}),(0,y.jsx)(qe.o,{items:t,isPinned:u}),r]})};var rt=n(84140),xe=n(36613),K=n(25019),dt=n(50082),ct=n(8066),ut=n(73134),ft=n(51336),We=n(4134),mt=n(88891);const ht=(e,a)=>{if(e.length===0)return{builder:null,prepData:()=>[]};let l,f;function c(s){return(t,r,S,z)=>(xe.A.orient(t,r,(g,C,v,M,F,b,V,P,H,Me,ae,Pt,we,Ue,Rt)=>{const me=xe.A.pxRatio,X=e[r-1];let Pe=t.data[r],Ae=X.showLine,At=X.showPoints===O.yL.Always,te=X.pointStrokeWidth??0;t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip();let ge=X.fillOpacity/100;t.ctx.fillStyle=(0,Q.X4)(g.fill(),ge),t.ctx.strokeStyle=(0,Q.X4)(g.stroke(),1),t.ctx.lineWidth=te;let Lt=2*Math.PI,Ke=M.key,He=F.key;const Xe=X.y.field.config.custom.pointSize,Le=X.color.field!=null;let ve=(Xe.max??Xe.fixed)*me,Et=t.posToVal(-ve/2,Ke),Ft=t.posToVal(t.bbox.width/me+ve/2,Ke),It=t.posToVal(t.bbox.height/me+ve/2,He),jt=t.posToVal(-ve/2,He),Ot=s.disp.size.values(t,r),Ye=m[r-1].values,Tt=m[r-1].index,Dt=m[r-1].hasAlpha,$t=X.pointShape===_.Square,Ze=Ae?new Path2D:null,ye=-1;for(let $=0;$<Pe[0].length;$++){let Ee=Pe[0][$],Fe=Pe[1][$];if(Ee>=Et&&Ee<=Ft&&Fe>=It&&Fe<=jt){let B=Math.round(Ot[$]*me),Se=b(Ee,M,Me,P),be=V(Fe,F,ae,H);if(Ae&&Ze.lineTo(Se,be),At){if(Le&&Ye[$]!==ye){ye=Ye[$];let se=ye===-1?ne.F:Tt[ye];t.ctx.fillStyle=Dt?se:(0,Q.X4)(se,ge),t.ctx.strokeStyle=(0,Q.X4)(se,1)}if($t){let se=Math.round(Se-B/2),Ge=Math.round(be-B/2);(Le||ge>0)&&t.ctx.fillRect(se,Ge,B,B),te>0&&t.ctx.strokeRect(se,Ge,B,B)}else t.ctx.beginPath(),t.ctx.arc(Se,be,B/2,0,Lt),(Le||ge>0)&&t.ctx.fill(),te>0&&t.ctx.stroke();s.each(t,r,$,Se-B/2-te/2,be-B/2-te/2,B+te,B+te)}}}if(Ae){t.ctx.strokeStyle=X.color.fixed,t.ctx.lineWidth=X.lineWidth*me;const{lineStyle:$}=X;$&&$.fill!=="solid"&&($.fill==="dot"&&(t.ctx.lineCap="round"),t.ctx.setLineDash($.dash??[10,10])),t.ctx.stroke(Ze)}t.ctx.restore()}),null)}let u=c({disp:{size:{values:(s,i)=>s.data[i][2]},color:{values:(s,i)=>s.data[i][3]}},each:(s,i,t,r,S,z,g)=>{r-=s.bbox.left,S-=s.bbox.top,l.add({x:r,y:S,w:z,h:g,sidx:i,didx:t})}});const h=new ft.e;h.setCursor({drag:{setScale:!0},dataIdx:(s,i)=>{if(i===1){const t=xe.A.pxRatio;f=null;let r=1/0,S=s.cursor.left*t,z=s.cursor.top*t;l.get(S,z,1,1,g=>{if((0,We.ur)(S,z,g.x,g.y,g.x+g.w,g.y+g.h)){let C=g.x+g.w/2,v=g.y+g.h/2,M=C-S,F=v-z,b=Math.sqrt(M**2+F**2);b<=g.w/2&&b<=r&&(r=b,f=g)}})}return f&&i===f.sidx?f.didx:null},points:{size:(s,i)=>f&&i===f.sidx?f.w/xe.A.pxRatio:0,fill:(s,i)=>"rgba(255,255,255,0.4)"}}),h.addHook("init",(s,i)=>{s.over.style.overflow="hidden"}),h.addHook("drawClear",s=>{l=l||new We.C$(0,0,s.bbox.width,s.bbox.height),l.clear(),s.series.forEach((i,t)=>{t>0&&(i._paths=null)})}),h.setMode(2);let d=e[0].x.field,o=d.config,p=o.custom,x=p?.scaleDistribution;h.addScale({scaleKey:"x",isTime:!1,orientation:O.Lt.Horizontal,direction:O.ON.Right,distribution:x?.type,log:x?.log,linearThreshold:x?.linearThreshold,min:o.min,max:o.max,softMin:p?.axisSoftMin,softMax:p?.axisSoftMax,centeredZero:p?.axisCenteredZero,decimals:o.decimals});let N=p.axisLabel;if(N==null||N===""){let s=e.map(t=>t.x.field.state?.displayName??""),i=e.length===1?d.state?.displayName??d.name:new Set(s).size===1?s[0]:Re(s);i!==""&&(N=i)}h.addAxis({scaleKey:"x",placement:p?.axisPlacement!==O.vM.Hidden?O.vM.Bottom:O.vM.Hidden,show:p?.axisPlacement!==O.vM.Hidden,grid:{show:p?.axisGridShow},border:{show:p?.axisBorderShow},theme:a,label:N,formatValue:(s,i)=>(0,Ne.cN)(d.display(s,i))}),e.forEach((s,i)=>{let t=s.y.field;const r=s.color.fixed,S=s.color.fixed;let z=t.config.unit??"y",g=t.config,C=g.custom,v=C?.scaleDistribution;h.addScale({scaleKey:z,orientation:O.Lt.Vertical,direction:O.ON.Up,distribution:v?.type,log:v?.log,linearThreshold:v?.linearThreshold,min:g.min,max:g.max,softMin:C?.axisSoftMin,softMax:C?.axisSoftMax,centeredZero:C?.axisCenteredZero,decimals:g.decimals});let M=C.axisLabel;if(M==null||M===""){let F=e.map(V=>V.y.field.state?.displayName??""),b=e.length===1?t.state?.displayName??t.name:new Set(F).size===1?F[0]:Re(F);b!==""&&(M=b)}h.addAxis({scaleKey:z,theme:a,placement:C?.axisPlacement===O.vM.Auto?O.vM.Left:C?.axisPlacement,show:C?.axisPlacement!==O.vM.Hidden,grid:{show:C?.axisGridShow},border:{show:C?.axisBorderShow},size:C?.axisWidth,label:M,formatValue:(F,b)=>(0,Ne.cN)(t.display(F,b))}),h.addSeries({facets:[{scale:"x",auto:!0},{scale:z,auto:!0}],pathBuilder:u,theme:a,scaleKey:"",lineColor:(0,Q.X4)(r??"#ffff",1),fillColor:(0,Q.X4)(S??"#ffff",.5),show:!t.state?.hideFrom?.viz})});const m=e.map(s=>{const i={index:[],getAll:()=>[],getOne:()=>-1,values:[],hasAlpha:!1},t=s.color.field;return t!=null&&(Object.assign(i,xt(t,a)),i.hasAlpha=i.index.some(r=>!r.endsWith("ff"))),i});function E(s){const{size:i,color:t}=pt(s);return s.forEach((r,S)=>{m[S].values=m[S].getAll(r.color.field?.values??[],t.min,t.max)}),[null,...s.map((r,S)=>{let z=r.x.field.values.length,g;if(r.size.field!=null){let{min:C,max:v}=r.size,M=C**2,b=v**2-M,V=r.size.field.values,P=i.min,Me=i.max-P;g=Array(z);for(let ae=0;ae<V.length;ae++){let we=(V[ae]-P)/Me,Ue=M+we*b;g[ae]=Ue**.5}}else g=Array(z).fill(r.size.fixed);return[r.x.field.values,r.y.field.values,g,Array(z).fill(r.color.fixed)]})]}return{builder:h,prepData:E}},pt=e=>{const a={size:{min:1/0,max:-1/0},color:{min:1/0,max:-1/0}};return e.forEach(l=>{[l.size,l.color].forEach((f,c)=>{if(f.field!=null){let u=c===0?a.size:a.color;const h=f.field.values;for(let d=0;d<h.length;d++){const o=h[d];o!=null&&(o<u.min&&(u.min=o),o>u.max&&(u.max=o))}}})}),a};function ue(e,a){return(0,rt.A)(a.visualization.getColorByName(e)).toHex8String()}function xt(e,a){let l=[],f=()=>[],c=()=>-1,u="";if(e.config.mappings?.length??!1){let h=e.config.mappings;for(let d=0;d<h.length;d++){let o=h[d];if(o.type===K.d.ValueToText)for(let p in o.options){let{color:x}=o.options[p];if(x!=null){let N=e.type===Y.PU.string?JSON.stringify(p):Number(p);u+=`v === ${N} ? ${l.length} : `,l.push(ue(x,a))}}else if(o.options.result.color!=null){let{color:p}=o.options.result;if(o.type===K.d.RangeToText){let x=[];o.options.from!=null&&x.push(`v >= ${Number(o.options.from)}`),o.options.to!=null&&x.push(`v <= ${Number(o.options.to)}`),x.length>0&&(u+=`${x.join(" && ")} ? ${l.length} : `,l.push(ue(p,a)))}else if(o.type===K.d.SpecialValue){let x=o.options.match;x===K.W.NaN?u+="isNaN(v)":x===K.W.NullAndNaN?u+="v == null || isNaN(v)":u+=`v ${x===K.W.True?"=== true":x===K.W.False?"=== false":x===K.W.Null?"== null":x===K.W.Empty?'=== ""':"== null"}`,u+=` ? ${l.length} : `,l.push(ue(p,a))}else o.type,K.d.RegexToText}}u+="-1"}else if(e.config.color?.mode===ut.Yb.Thresholds){if(e.config.thresholds?.mode===dt.O.Absolute){let h=e.config.thresholds.steps,d=h.length-1;for(let o=d;o>0;o--)u+=`v >= ${h[o].value} ? ${o} : `;u+="0",l=h.map(o=>ue(o.color,a))}}else if(e.config.color?.mode?.startsWith("continuous")){let h=(0,ct.Qi)(e).getCalculator(e,a);l=Array(32);for(let d=0;d<l.length;d++){let o=d/(l.length-1);l[d]=ue(h(o,o),a)}f=(d,o,p)=>(0,mt.O4)(d,l,o,p)}return u!==""&&(c=new Function("v",`return ${u};`),f=new Function("vals",`
      let idxs = Array(vals.length);

      for (let i = 0; i < vals.length; i++) {
        let v = vals[i];
        idxs[i] = ${u};
      }

      return idxs;
    `)),{index:l,getOne:c,getAll:f}}const gt=e=>{const a=(0,k.of)(vt),l=(0,k.$j)();let{mapping:f,series:c}=e.options,u=(0,Z.useMemo)(()=>nt(f,c,e.data.series,e.fieldConfig),[f,c,e.data.series,e.fieldConfig]),{builder:h,prepData:d}=(0,Z.useMemo)(()=>ht(u,Te.$.theme2),[f,c,e.data.structureRev,e.fieldConfig,e.options.tooltip]),o=(0,Z.useMemo)(()=>d(u),[u]),p=h==null||o.length===0?"Err":"";const x=()=>{if(!e.options.legend.showLegend)return null;const N=[];u.forEach((r,S)=>{let z=r.y.field;z.config.custom.hideFrom?.legend||N.push({yAxis:1,label:r.name.value,color:(0,Q.X4)(r.color.fixed??ne.F,1),getItemKey:()=>`${S}-${r.name.value}`,fieldName:z.state?.displayName??z.name,disabled:z.state?.hideFrom?.viz??!1,getDisplayValues:()=>(0,ke.UO)(e.options.legend.calcs,z,l)})});const{placement:m,displayMode:E,width:s,sortBy:i,sortDesc:t}=e.options.legend;return(0,y.jsx)(De.KU.Legend,{placement:m,width:s,children:(0,y.jsx)(Qe.t,{className:a.legend,placement:m,items:N,displayMode:E,sortBy:i,sortDesc:t,isSortable:!0})})};return p?(0,y.jsx)("div",{className:"panel-empty",children:(0,y.jsx)("p",{children:p})}):(0,y.jsx)(De.KU,{width:e.width,height:e.height,legend:x(),children:(N,m)=>(0,y.jsx)(Je.Z,{config:h,data:o,width:N,height:m,children:e.options.tooltip.mode!==O.$N.None&&(0,y.jsx)($e.xl,{config:h,hoverMode:$e.b3.xyOne,render:(E,s,i,t,r)=>(0,y.jsx)(st,{data:e.data.series,dataIdxs:s,xySeries:u,dismiss:r,isPinned:t,seriesIdx:i}),maxWidth:e.options.tooltip.maxWidth})})})},vt=()=>({legend:(0,w.css)({div:{justifyContent:"flex-start"}})});var ee=n(37055),yt=n(38248),St=n(11404),Be=n(43228);const bt=5;function zt(e){return{standardOptions:{[ee.uo.Min]:{hideFromDefaults:!0},[ee.uo.Max]:{hideFromDefaults:!0},[ee.uo.Unit]:{hideFromDefaults:!0},[ee.uo.Decimals]:{hideFromDefaults:!0},[ee.uo.NoValue]:{hideFromDefaults:!0},[ee.uo.DisplayName]:{hideFromDefaults:!0},[ee.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:ne.Y.PaletteClassic}}},useCustomConfig:a=>{a.addRadio({path:"show",name:"Show",defaultValue:e.show,settings:{options:[{label:"Points",value:j.Points},{label:"Lines",value:j.Lines},{label:"Both",value:j.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:e.pointSize?.fixed??bt,settings:{min:1,max:100,step:1},showIf:l=>l.show!==j.Lines}).addNumberInput({path:"pointSize.min",name:"Min point size",showIf:l=>l.show!==j.Lines}).addNumberInput({path:"pointSize.max",name:"Max point size",showIf:l=>l.show!==j.Lines}).addRadio({path:"pointShape",name:"Point shape",defaultValue:_.Circle,settings:{options:[{value:_.Circle,label:"Circle"},{value:_.Square,label:"Square"}]},showIf:l=>l.show!==j.Lines}).addSliderInput({path:"pointStrokeWidth",name:"Point stroke width",defaultValue:1,settings:{min:0,max:10},showIf:l=>l.show!==j.Lines}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:50,settings:{min:0,max:100,step:1},showIf:l=>l.show!==j.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:l=>l.show!==j.Points,editor:Be.F,override:Be.F,process:le.hS,shouldApply:l=>l.type===Y.PU.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:l=>l.show!==j.Points}),yt.r(a,e),St.e(a)}}}var fe=n(735);const Ct=e=>{const a=e?.pluginVersion??"";return a===""||parseFloat(a)<11.1?Nt(e):e.options};function Nt(e){const{dims:a,seriesMapping:l,series:f,...c}=e.options,{exclude:u=[],frame:h,x:d}=a??{},o=e.fieldConfig.defaults.custom;let p=f;l===fe.it.Auto&&(p=[{x:void 0,y:void 0}]);let x=0;const N=p.map(({x:E,y:s,pointColor:i,pointSize:t,frame:r})=>{const{fixed:S,field:z}=i??{},{fixed:g,field:C,min:v,max:M}=t??{};let F,b;return E==null&&d==null?F={id:A.Ct.byType,options:"number"}:F={id:A.Ct.byName,options:E??d},s==null?b={id:A.Ct.byType,options:"number"}:b={id:A.Ct.byName,options:s},z==null&&S&&o.pointColor?.fixed!==S&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(H=>H.id==="color"))||e.fieldConfig.overrides.push({matcher:b,properties:[{id:"color",value:{mode:"fixed",fixedColor:S}}]})),C==null&&g&&o.pointSize?.fixed!==g&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(H=>H.id==="custom.pointSize.fixed"))||e.fieldConfig.overrides.push({matcher:b,properties:[{id:"custom.pointSize.fixed",value:g}]})),C!=null&&(v&&o.pointSize?.min!==v&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(H=>H.id==="custom.pointSize.min"))||e.fieldConfig.overrides.push({matcher:{id:A.Ct.byName,options:C},properties:[{id:"custom.pointSize.min",value:v}]})),M&&o.pointSize?.max!==M&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(H=>H.id==="custom.pointSize.max"))||e.fieldConfig.overrides.push({matcher:{id:A.Ct.byName,options:C},properties:[{id:"custom.pointSize.max",value:M}]}))),{frame:{matcher:{id:A.jR.byIndex,options:r??(l===fe.it.Manual?x++:h??0)}},x:{matcher:F},y:{matcher:b,...u.length&&{exclude:{id:A.Ct.byNames,options:u}}},...z&&{color:{matcher:{id:A.Ct.byName,options:z}}},...C&&{size:{matcher:{id:A.Ct.byName,options:C}}}}});return{...c,mapping:l===fe.it.Auto?fe.it.Auto:fe.it.Manual,series:N}}const Mt=new T.m(gt).setMigrationHandler(Ct).useFieldConfig(zt(Ce)).setPanelOptions(e=>{e.addRadio({path:"mapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"series",path:"series",name:"",editor:D,defaultValue:[{}]}),W.D(e,!0),J.H(e)})}}]);

//# sourceMappingURL=xychart2.75df5558e305a5719004.js.map