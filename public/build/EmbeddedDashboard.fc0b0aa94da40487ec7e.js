"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2859],{13251:(T,E,a)=>{a.d(E,{EmbeddedDashboard:()=>M});var r=a(74848),t=a(32196),_=a(96540),p=a(76885),f=a(80943),g=a(42418),D=a(62930),m=a(40845),v=a(31678),P=a(72255);function M(s){const e=(0,P.sP)(),{dashboard:n,loadError:o}=e.useState();return(0,_.useEffect)(()=>(e.loadDashboard({uid:s.uid,route:v.DashboardRoutes.Embedded}),()=>{e.clearState()}),[e,s.uid]),o?(0,r.jsx)(g.F,{severity:"error",title:"Failed to load dashboard",children:o}):n?(0,r.jsx)(b,{model:n,...s}):(0,r.jsx)(D.y,{})}function b({model:s,initialState:e,onStateChange:n}){const[o,u]=(0,_.useState)(!1),{controls:c,body:d,scopes:l}=s.useState(),i=(0,m.of)(h);return(0,_.useEffect)(()=>{if(u(!0),e){const x=new URLSearchParams(e);f.Go.syncStateFromSearchParams(s,x)}return s.activate()},[s]),O(n,s),o?(0,r.jsxs)("div",{className:(0,t.cx)(i.canvas,c&&!l&&i.canvasWithControls,l&&i.canvasWithScopes),children:[l&&(0,r.jsx)(l.Component,{model:l}),c&&(0,r.jsx)("div",{className:(0,t.cx)(i.controlsWrapper,l&&i.controlsWrapperWithScopes),children:(0,r.jsx)(c.Component,{model:c})}),(0,r.jsx)("div",{className:i.body,children:(0,r.jsx)(d.Component,{model:d})})]}):null}function O(s,e){(0,_.useEffect)(()=>{if(!s)return;let n="";const o=e.subscribeToEvent(f.bZ,u=>{if(u.payload.changedObject.urlSync){const c=f.Go.getUrlState(e),d=p.kM.renderUrl("",c);n!==d&&(n=d,s(d))}});return()=>o.unsubscribe()},[e,s])}function h(s){return{canvas:(0,t.css)({label:"canvas-content",display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",flexBasis:"100%",flexGrow:1}),canvasWithControls:(0,t.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),canvasWithScopes:(0,t.css)({gridTemplateAreas:`
        "scopes controls"
        "panels panels"`,gridTemplateColumns:`${s.spacing(32)} 1fr`,gridTemplateRows:"auto 1fr"}),body:(0,t.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",gridArea:"panels",marginBottom:s.spacing(2)}),controlsWrapper:(0,t.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls",padding:s.spacing(2,0,2,2)}),controlsWrapperWithScopes:(0,t.css)({padding:s.spacing(2,0)})}}}}]);

//# sourceMappingURL=EmbeddedDashboard.fc0b0aa94da40487ec7e.js.map